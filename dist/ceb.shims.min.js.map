{"version":3,"file":"ceb.shims.min.js","sources":["../node_modules/document-register-element/build/document-register-element.max.js","../node_modules/es6-shim/es6-shim.js","../src/ceb.js"],"names":["window","document","Object","REGISTER_ELEMENT","loopAndVerify","list","action","i","length","verifyAndSetupAndAction","loopAndSetup","node","patch","protos","getTypeIndex","executeAction","iPO","call","HTMLElementPrototype","querySelectorAll","query","target","is","getAttribute","nodeName","indexOf","types","PREFIX_IS","toUpperCase","PREFIX_TAG","isInQSA","name","type","onDOMAttrModified","e","currentTarget","attrChange","prevValue","newValue","attributeChangedCallback","attrName","ADDITION","REMOVAL","onDOMNode","executor","patchedSetAttribute","value","self","this","setAttribute","onSubtreeModified","setupNode","proto","setPrototype","observer","observe","attributesObserver","doesNotSupportDOMAttrModified","EXPANDO_UID","getAttributesMirror","addEventListener","DOM_SUBTREE_MODIFIED","DOM_ATTR_MODIFIED","createdCallback","created","fn","attached","detached","patchIfNotAlready","callDOMAttrModified","Math","random","EXTENDS","validName","invalidNames","documentElement","v","OP","prototype","hOP","hasOwnProperty","isPrototypeOf","defineProperty","gOPD","getOwnPropertyDescriptor","gOPN","getOwnPropertyNames","gPO","getPrototypeOf","sPO","setPrototypeOf","hasProto","__proto__","create","Bridge","o","p","setProperties","key","names","MutationObserver","WebKitMutationObserver","HTMLElement","Element","Node","cloneNode","createElement","attributes","characterData","attributeOldValue","DOMAttrModified","removeEventListener","setListener","removeAttribute","oldAttributes","newAttributes","attr","result","options","upperType","checkEmAll","callback","records","current","addedNodes","removedNodes","attributeName","oldValue","childList","subtree","localName","typeExtension","apply","arguments","setup","toLowerCase","deep","Error","test","constructor","extending","opt","push","concat","root","factory","define","amd","exports","module","returnExports","ArrayIterator","isCallableWithoutNew","func","supportsSubclassing","C","f","Sub","arePropertyDescriptorsSupported","startsWithRejectsRegex","rejectsRegex","String","startsWith","getGlobal","Function","globals","global_isFinite","isFinite","supportsDescriptors","startsWithIsCompliant","_indexOf","bind","_toString","toString","_hasOwnProperty","noop","Symbol","Type","string","x","regex","symbol","object","force","configurable","enumerable","writable","Value","getter","TypeError","get","proxy","originalObject","targetObject","originalDescriptor","set","redefine","property","descriptor","defineProperties","map","keys","forEach","method","properties","Prototype","$iterator$","iterator","Set","addIterator","impl","isArguments","str","callee","ES","CheckObjectCoercible","optMessage","TypeIsObject","ToObject","IsCallable","ToInt32","ToNumber","ToUint32","ToInteger","number","Number","isNaN","floor","abs","ToLength","len","MAX_SAFE_INTEGER","SameValue","a","b","SameValueZero","IsIterable","GetIterator","itFn","it","IteratorNext","next","Construct","args","obj","_es6construct","emulateES6construct","numberConversion","roundToEven","n","w","packIEEE754","ebits","fbits","s","bits","bytes","bias","pow","Infinity","min","log","LN2","reverse","join","parseInt","slice","unpackIEEE754","j","NaN","unpackFloat32","packFloat32","conversions","toFloat32","num","Float32Array","float32array","fromCodePoint","RangeError","fromCharCode","raw","callSite","cooked","rawValue","rawString","literalsegments","nextKey","nextSeg","nextSub","stringElements","nextIndex","originalFromCodePoint","StringShims","repeat","times","half","thisStr","searchStr","startArg","start","max","endsWith","thisLen","posArg","pos","end","includes","searchString","position","codePointAt","first","charCodeAt","isEnd","second","hasStringTrimBug","trim","ws","trimRegexp","RegExp","replace","StringIterator","_s","_i","done","substr","ArrayShims","from","iterable","mapFn","hasThisArg","thisArg","usingIterator","iterationValue","Array","of","arrayFromSwallowsNegativeLengths","array","kind","retval","ArrayPrototypeShims","copyWithin","to","fin","count","direction","fill","O","relativeStart","relativeEnd","find","predicate","findIndex","values","entries","unscopables","maxSafeInteger","MIN_SAFE_INTEGER","EPSILON","parseFloat","isInteger","isSafeInteger","item","idx","assign","reduce","source","magic","checkArgs","polyfill","FAKENULL","gpo","spo","originalObjectKeys","flags","regExpFlagsGetter","global","ignoreCase","multiline","unicode","sticky","regExpSupportsFlagsWithRegex","OrigRegExp","RegExpShim","pattern","MathShims","acosh","sqrt","asinh","atanh","cbrt","negate","clz32","cosh","exp","expm1","hypot","anyNaN","allZero","anyInfinity","numbers","every","arg","sort","largest","divided","sum","log2","LOG2E","log10","LOG10E","log1p","sign","sinh","tanh","trunc","imul","y","ah","al","bh","bl","fround","PromiseShim","Promise","Promise$prototype","IsPromise","promise","_promiseConstructor","_status","makeZeroTimeout","PromiseCapability","capability","resolver","resolve","reject","setTimeout","postMessage","timeouts","messageName","setZeroTimeout","handleMessage","event","data","stopPropagation","shift","makePromiseAsap","P","task","then","enqueue","setImmediate","process","nextTick","updatePromiseFromPotentialThenable","triggerPromiseReactions","reactions","reaction","handler","updateResult","promiseResolutionHandler","onFulfilled","onRejected","_resolveReactions","_rejectReactions","resolution","_result","reason","_promiseAllResolver","index","remaining","@@create","all","nextPromise","resolveElement","race","rejectPromise","resolvePromise","catch","resolutionHandler","resolveReaction","rejectReaction","accept","defer","chain","promiseSupportsSubclassing","S","promiseIgnoresNonFunctionThenCallbacks","ex","promiseRequiresObjectContext","testOrder","k","preservesInsertionOrder","preservesNumericInsertionOrder","fastkey","emptyObject","collectionShims","Map","MapEntry","prev","MapIterator","head","_head","_es6map","_storage","_size","adder","nextItem","empty","isRemoved","Map$prototype","fkey","entry","has","delete","clear","context","SetShim","_es6set","[[SetData]]","add","Set$prototype","ensureMap","m","charAt","size","hasFKey","entireSet","M","g","ceb","emptyFn","listValues","propName","fromCamelCaseToHyphenCase","split","part","compareLevels","level","applyAttributeValue","el","attName","isBoolean","hasAttribute","undefined","accessorFactory","wrappers","wrapped","stack","previous","attributeAccessorSetFactory","setter","attValue","attributeAccessorGetFactory","methodFactory","sanitizeStructure","struct","features","interceptors","methods","attachedCallback","detachedCallback","setupFeatures","builder","tagName","registered","feature","createAttributesHash","filter","createDefinedPropertiesHash","definedProperty","attribute","setStack","getStack","createMethodsHash","methName","baseStructFactory","builtInFeatures","delegate","valueInitializer","sanitizeProperty","params","api","testing","build","definedProperties","registerElement","delegableSetAccessorInterceptor","querySelector","targetPropName","targetAttName","delegableGetAccessorInterceptor","intercept","createdCallbackWrapper","attributeChangedCallbackWrapper","oldVal","newVal","wrap","setFn","getFn","anExtend","aProto","someProperties","sanitizedProperties","someMethods","register","_testing"],"mappings":"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","sourcesContent":["/*!\nCopyright (C) 2014 by WebReflection\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n(function(window, document, Object, REGISTER_ELEMENT){'use strict';\n\n// in case it's there or already patched\nif (REGISTER_ELEMENT in document) return;\n\n// DO NOT USE THIS FILE DIRECTLY, IT WON'T WORK\n// THIS IS A PROJECT BASED ON A BUILD SYSTEM\n// THIS FILE IS JUST WRAPPED UP RESULTING IN\n// build/document-register-element.js\n// and its .max.js counter part\n\nvar\n  // IE < 11 only + old WebKit for attributes + feature detection\n  EXPANDO_UID = '__' + REGISTER_ELEMENT + (Math.random() * 10e4 >> 0),\n\n  // shortcuts and costants\n  EXTENDS = 'extends',\n  DOM_ATTR_MODIFIED = 'DOMAttrModified',\n  DOM_SUBTREE_MODIFIED = 'DOMSubtreeModified',\n  PREFIX_TAG = '<',\n  PREFIX_IS = '=',\n\n  // valid and invalid node names\n  validName = /^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,\n  invalidNames = [\n    'ANNOTATION-XML',\n    'COLOR-PROFILE',\n    'FONT-FACE',\n    'FONT-FACE-SRC',\n    'FONT-FACE-URI',\n    'FONT-FACE-FORMAT',\n    'FONT-FACE-NAME',\n    'MISSING-GLYPH'\n  ],\n\n  // registered types and their prototypes\n  types = [],\n  protos = [],\n\n  // to query subnodes\n  query = '',\n\n  // html shortcut used to feature detect\n  documentElement = document.documentElement,\n\n  // ES5 inline helpers || basic patches\n  indexOf = types.indexOf || function (v) {\n    for(var i = this.length; i-- && this[i] !== v;){}\n    return i;\n  },\n\n  // other helpers / shortcuts\n  OP = Object.prototype,\n  hOP = OP.hasOwnProperty,\n  iPO = OP.isPrototypeOf,\n\n  defineProperty = Object.defineProperty,\n  gOPD = Object.getOwnPropertyDescriptor,\n  gOPN = Object.getOwnPropertyNames,\n  gPO = Object.getPrototypeOf,\n  sPO = Object.setPrototypeOf,\n\n  hasProto = !!Object.__proto__,\n\n  // used to create unique instances\n  create = Object.create || function Bridge(proto) {\n    // silly broken polyfill probably ever used but short enough to work\n    return proto ? ((Bridge.prototype = proto), new Bridge) : this;\n  },\n\n  // will set the prototype if possible\n  // or copy over all properties\n  setPrototype = sPO || (\n    hasProto ?\n      function (o, p) {\n        o.__proto__ = p;\n        return o;\n      } : (\n    (gOPN && gOPD) ?\n      (function(){\n        function setProperties(o, p) {\n          for (var\n            key,\n            names = gOPN(p),\n            i = 0, length = names.length;\n            i < length; i++\n          ) {\n            key = names[i];\n            if (!hOP.call(o, key)) {\n              defineProperty(o, key, gOPD(p, key));\n            }\n          }\n        }\n        return function (o, p) {\n          do {\n            setProperties(o, p);\n          } while (p = gPO(p));\n          return o;\n        };\n      }()) :\n      function (o, p) {\n        for (var key in p) {\n          o[key] = p[key];\n        }\n        return o;\n      }\n  )),\n\n  // DOM shortcuts and helpers, if any\n\n  MutationObserver = window.MutationObserver ||\n                     window.WebKitMutationObserver,\n\n  HTMLElementPrototype = (\n    window.HTMLElement ||\n    window.Element ||\n    window.Node\n  ).prototype,\n\n  cloneNode = HTMLElementPrototype.cloneNode,\n  setAttribute = HTMLElementPrototype.setAttribute,\n\n  // replaced later on\n  createElement = document.createElement,\n\n  // shared observer for all attributes\n  attributesObserver = MutationObserver && {\n    attributes: true,\n    characterData: true,\n    attributeOldValue: true\n  },\n\n  // useful to detect only if there's no MutationObserver\n  DOMAttrModified = MutationObserver || function(e) {\n    doesNotSupportDOMAttrModified = false;\n    documentElement.removeEventListener(\n      DOM_ATTR_MODIFIED,\n      DOMAttrModified\n    );\n  },\n\n  // internal flags\n  setListener = false,\n  doesNotSupportDOMAttrModified = true,\n\n  // optionally defined later on\n  onSubtreeModified,\n  callDOMAttrModified,\n  getAttributesMirror,\n  observer,\n\n  // based on setting prototype capability\n  // will check proto or the expando attribute\n  // in order to setup the node once\n  patchIfNotAlready,\n  patch\n;\n\nif (sPO || hasProto) {\n    patchIfNotAlready = function (node, proto) {\n      if (!iPO.call(proto, node)) {\n        setupNode(node, proto);\n      }\n    };\n    patch = setupNode;\n} else {\n    patchIfNotAlready = function (node, proto) {\n      if (!node[EXPANDO_UID]) {\n        node[EXPANDO_UID] = Object(true);\n        setupNode(node, proto);\n      }\n    };\n    patch = patchIfNotAlready;\n}\n\nif (!MutationObserver) {\n  documentElement.addEventListener(DOM_ATTR_MODIFIED, DOMAttrModified);\n  documentElement.setAttribute(EXPANDO_UID, 1);\n  documentElement.removeAttribute(EXPANDO_UID);\n  if (doesNotSupportDOMAttrModified) {\n    onSubtreeModified = function (e) {\n      var\n        node = this,\n        oldAttributes,\n        newAttributes,\n        key\n      ;\n      if (node === e.target) {\n        oldAttributes = node[EXPANDO_UID];\n        node[EXPANDO_UID] = (newAttributes = getAttributesMirror(node));\n        for (key in newAttributes) {\n          if (!(key in oldAttributes)) {\n            // attribute was added\n            return callDOMAttrModified(\n              0,\n              node,\n              key,\n              oldAttributes[key],\n              newAttributes[key],\n              'ADDITION'\n            );\n          } else if (newAttributes[key] !== oldAttributes[key]) {\n            // attribute was changed\n            return callDOMAttrModified(\n              1,\n              node,\n              key,\n              oldAttributes[key],\n              newAttributes[key],\n              'MODIFICATION'\n            );\n          }\n        }\n        // checking if it has been removed\n        for (key in oldAttributes) {\n          if (!(key in newAttributes)) {\n            // attribute removed\n            return callDOMAttrModified(\n              2,\n              node,\n              key,\n              oldAttributes[key],\n              newAttributes[key],\n              'REMOVAL'\n            );\n          }\n        }\n      }\n    };\n    callDOMAttrModified = function (\n      attrChange,\n      currentTarget,\n      attrName,\n      prevValue,\n      newValue,\n      action\n    ) {\n      var e = {\n        attrChange: attrChange,\n        currentTarget: currentTarget,\n        attrName: attrName,\n        prevValue: prevValue,\n        newValue: newValue\n      };\n      e[action] = attrChange;\n      onDOMAttrModified(e);\n    };\n    getAttributesMirror = function (node) {\n      for (var\n        attr, name,\n        result = {},\n        attributes = node.attributes,\n        i = 0, length = attributes.length;\n        i < length; i++\n      ) {\n        attr = attributes[i];\n        name = attr.name;\n        if (name !== 'setAttribute') {\n          result[name] = attr.value;\n        }\n      }\n      return result;\n    };\n  }\n}\n\nfunction loopAndVerify(list, action) {\n  for (var i = 0, length = list.length; i < length; i++) {\n    verifyAndSetupAndAction(list[i], action);\n  }\n}\n\nfunction loopAndSetup(list) {\n  for (var i = 0, length = list.length, node; i < length; i++) {\n    node = list[i];\n    patch(node, protos[getTypeIndex(node)]);\n  }\n}\n\nfunction executeAction(action) {\n  return function (node) {\n    if (iPO.call(HTMLElementPrototype, node)) {\n      verifyAndSetupAndAction(node, action);\n      loopAndVerify(\n        node.querySelectorAll(query),\n        action\n      );\n    }\n  };\n}\n\nfunction getTypeIndex(target) {\n  var\n    is = target.getAttribute('is'),\n    nodeName = target.nodeName,\n    i = indexOf.call(\n      types,\n      is ?\n          PREFIX_IS + is.toUpperCase() :\n          PREFIX_TAG + nodeName\n    )\n  ;\n  return is && -1 < i && !isInQSA(nodeName, is) ? -1 : i;\n}\n\nfunction isInQSA(name, type) {\n  return -1 < query.indexOf(name + '[is=\"' + type + '\"]');\n}\n\nfunction onDOMAttrModified(e) {\n  var\n    node = e.currentTarget,\n    attrChange = e.attrChange,\n    prevValue = e.prevValue,\n    newValue = e.newValue\n  ;\n  if (node.attributeChangedCallback &&\n      e.attrName !== 'style') {\n    node.attributeChangedCallback(\n      e.attrName,\n      attrChange === e.ADDITION ? null : prevValue,\n      attrChange === e.REMOVAL ? null : newValue\n    );\n  }\n}\n\nfunction onDOMNode(action) {\n  var executor = executeAction(action);\n  return function (e) {\n    executor(e.target);\n  };\n}\n\nfunction patchedSetAttribute(name, value) {\n  var self = this;\n  setAttribute.call(self, name, value);\n  onSubtreeModified.call(self, {target: self});\n}\n\nfunction setupNode(node, proto) {\n  setPrototype(node, proto);\n  if (observer) {\n    observer.observe(node, attributesObserver);\n  } else {\n    if (doesNotSupportDOMAttrModified) {\n      node.setAttribute = patchedSetAttribute;\n      node[EXPANDO_UID] = getAttributesMirror(node);\n      node.addEventListener(DOM_SUBTREE_MODIFIED, onSubtreeModified);\n    }\n    node.addEventListener(DOM_ATTR_MODIFIED, onDOMAttrModified);\n  }\n  if (node.createdCallback) {\n    node.created = true;\n    node.createdCallback();\n    node.created = false;\n  }\n}\n\nfunction verifyAndSetupAndAction(node, action) {\n  var\n    fn,\n    i = getTypeIndex(node),\n    attached = 'attached',\n    detached = 'detached'\n  ;\n  if (-1 < i) {\n    patchIfNotAlready(node, protos[i]);\n    i = 0;\n    if (action === attached && !node[attached]) {\n      node[detached] = false;\n      node[attached] = true;\n      i = 1;\n    } else if (action === detached && !node[detached]) {\n      node[attached] = false;\n      node[detached] = true;\n      i = 1;\n    }\n    if (i && (fn = node[action + 'Callback'])) fn.call(node);\n  }\n}\n\n// set as enumerable, writable and configurable\ndocument[REGISTER_ELEMENT] = function registerElement(type, options) {\n  upperType = type.toUpperCase();\n  if (!setListener) {\n    // only first time document.registerElement is used\n    // we need to set this listener\n    // setting it by default might slow down for no reason\n    setListener = true;\n    if (MutationObserver) {\n      observer = (function(attached, detached){\n        function checkEmAll(list, callback) {\n          for (var i = 0, length = list.length; i < length; callback(list[i++])){}\n        }\n        return new MutationObserver(function (records) {\n          for (var\n            current, node,\n            i = 0, length = records.length; i < length; i++\n          ) {\n            current = records[i];\n            if (current.type === 'childList') {\n              checkEmAll(current.addedNodes, attached);\n              checkEmAll(current.removedNodes, detached);\n            } else {\n              node = current.target;\n              if (node.attributeChangedCallback &&\n                  current.attributeName !== 'style') {\n                node.attributeChangedCallback(\n                  current.attributeName,\n                  current.oldValue,\n                  node.getAttribute(current.attributeName)\n                );\n              }\n            }\n          }\n        });\n      }(executeAction('attached'), executeAction('detached')));\n      observer.observe(\n        document,\n        {\n          childList: true,\n          subtree: true\n        }\n      );\n    } else {\n      document.addEventListener('DOMNodeInserted', onDOMNode('attached'));\n      document.addEventListener('DOMNodeRemoved', onDOMNode('detached'));\n    }\n\n    document.addEventListener('readystatechange', function (e) {\n      loopAndVerify(\n        document.querySelectorAll(query),\n        'attached'\n      );\n    });\n\n    document.createElement = function (localName, typeExtension) {\n      var\n        node = createElement.apply(document, arguments),\n        i = indexOf.call(\n          types,\n          (typeExtension ? PREFIX_IS : PREFIX_TAG) +\n          (typeExtension || localName).toUpperCase()\n        ),\n        setup = -1 < i\n      ;\n      if (typeExtension) {\n        node.setAttribute('is', typeExtension = typeExtension.toLowerCase());\n        if (setup) {\n          setup = isInQSA(localName.toUpperCase(), typeExtension);\n        }\n      }\n      if (setup) patch(node, protos[i]);\n      return node;\n    };\n\n    HTMLElementPrototype.cloneNode = function (deep) {\n      var\n        node = cloneNode.call(this, !!deep),\n        i = getTypeIndex(node)\n      ;\n      if (-1 < i) patch(node, protos[i]);\n      if (deep) loopAndSetup(node.querySelectorAll(query));\n      return node;\n    };\n  }\n\n  if (-2 < (\n    indexOf.call(types, PREFIX_IS + upperType) +\n    indexOf.call(types, PREFIX_TAG + upperType)\n  )) {\n    throw new Error('A ' + type + ' type is already registered');\n  }\n\n  if (!validName.test(upperType) || -1 < indexOf.call(invalidNames, upperType)) {\n    throw new Error('The type ' + type + ' is invalid');\n  }\n\n  var\n    constructor = function () {\n      return document.createElement(nodeName, extending && upperType);\n    },\n    opt = options || OP,\n    extending = hOP.call(opt, EXTENDS),\n    nodeName = extending ? options[EXTENDS].toUpperCase() : upperType,\n    i = types.push((extending ? PREFIX_IS : PREFIX_TAG) + upperType) - 1,\n    upperType\n  ;\n\n  query = query.concat(\n    query.length ? ',' : '',\n    extending ? nodeName + '[is=\"' + type.toLowerCase() + '\"]' : nodeName\n  );\n\n  constructor.prototype = (\n    protos[i] = hOP.call(opt, 'prototype') ?\n      opt.prototype :\n      create(HTMLElementPrototype)\n  );\n\n  loopAndVerify(\n    document.querySelectorAll(query),\n    'attached'\n  );\n\n  return constructor;\n};\n\n\n}(window, document, Object, 'registerElement'));"," /*!\n  * https://github.com/paulmillr/es6-shim\n  * @license es6-shim Copyright 2013-2014 by Paul Miller (http://paulmillr.com)\n  *   and contributors,  MIT License\n  * es6-shim: v0.22.2\n  * see https://github.com/paulmillr/es6-shim/blob/0.22.2/LICENSE\n  * Details and documentation:\n  * https://github.com/paulmillr/es6-shim/\n  */\n\n// UMD (Universal Module Definition)\n// see https://github.com/umdjs/umd/blob/master/returnExports.js\n(function (root, factory) {\n  /*global define, module, exports */\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(factory);\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.returnExports = factory();\n  }\n}(this, function () {\n  'use strict';\n\n  var isCallableWithoutNew = function (func) {\n    try {\n      func();\n    } catch (e) {\n      return false;\n    }\n    return true;\n  };\n\n  var supportsSubclassing = function (C, f) {\n    /* jshint proto:true */\n    try {\n      var Sub = function () { C.apply(this, arguments); };\n      if (!Sub.__proto__) { return false; /* skip test on IE < 11 */ }\n      Object.setPrototypeOf(Sub, C);\n      Sub.prototype = Object.create(C.prototype, {\n        constructor: { value: C }\n      });\n      return f(Sub);\n    } catch (e) {\n      return false;\n    }\n  };\n\n  var arePropertyDescriptorsSupported = function () {\n    try {\n      Object.defineProperty({}, 'x', {});\n      return true;\n    } catch (e) { /* this is IE 8. */\n      return false;\n    }\n  };\n\n  var startsWithRejectsRegex = function () {\n    var rejectsRegex = false;\n    if (String.prototype.startsWith) {\n      try {\n        '/a/'.startsWith(/a/);\n      } catch (e) { /* this is spec compliant */\n        rejectsRegex = true;\n      }\n    }\n    return rejectsRegex;\n  };\n\n  /*jshint evil: true */\n  var getGlobal = new Function('return this;');\n  /*jshint evil: false */\n\n  var globals = getGlobal();\n  var global_isFinite = globals.isFinite;\n  var supportsDescriptors = !!Object.defineProperty && arePropertyDescriptorsSupported();\n  var startsWithIsCompliant = startsWithRejectsRegex();\n  var _indexOf = Function.call.bind(String.prototype.indexOf);\n  var _toString = Function.call.bind(Object.prototype.toString);\n  var _hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n  var ArrayIterator; // make our implementation private\n  var noop = function () {};\n\n  var Symbol = globals.Symbol || {};\n  var Type = {\n    string: function (x) { return _toString(x) === '[object String]'; },\n    regex: function (x) { return _toString(x) === '[object RegExp]'; },\n    symbol: function (x) {\n      /*jshint notypeof: true */\n      return typeof globals.Symbol === 'function' && typeof x === 'symbol';\n      /*jshint notypeof: false */\n    }\n  };\n\n  var defineProperty = function (object, name, value, force) {\n    if (!force && name in object) { return; }\n    if (supportsDescriptors) {\n      Object.defineProperty(object, name, {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: value\n      });\n    } else {\n      object[name] = value;\n    }\n  };\n\n  var Value = {\n    getter: function (object, name, getter) {\n      if (!supportsDescriptors) {\n        throw new TypeError('getters require true ES5 support');\n      }\n      Object.defineProperty(object, name, {\n        configurable: true,\n        enumerable: false,\n        get: getter\n      });\n    },\n    proxy: function (originalObject, key, targetObject) {\n      if (!supportsDescriptors) {\n        throw new TypeError('getters require true ES5 support');\n      }\n      var originalDescriptor = Object.getOwnPropertyDescriptor(originalObject, key);\n      Object.defineProperty(targetObject, key, {\n        configurable: originalDescriptor.configurable,\n        enumerable: originalDescriptor.enumerable,\n        get: function getKey() { return originalObject[key]; },\n        set: function setKey(value) { originalObject[key] = value; }\n      });\n    },\n    redefine: function (object, property, newValue) {\n      if (supportsDescriptors) {\n        var descriptor = Object.getOwnPropertyDescriptor(object, property);\n        descriptor.value = newValue;\n        Object.defineProperty(object, property, descriptor);\n      } else {\n        object[property] = newValue;\n      }\n    }\n  };\n\n  // Define configurable, writable and non-enumerable props\n  // if they don’t exist.\n  var defineProperties = function (object, map) {\n    Object.keys(map).forEach(function (name) {\n      var method = map[name];\n      defineProperty(object, name, method, false);\n    });\n  };\n\n  // Simple shim for Object.create on ES3 browsers\n  // (unlike real shim, no attempt to support `prototype === null`)\n  var create = Object.create || function (prototype, properties) {\n    function Prototype() {}\n    Prototype.prototype = prototype;\n    var object = new Prototype();\n    if (typeof properties !== 'undefined') {\n      defineProperties(object, properties);\n    }\n    return object;\n  };\n\n  // This is a private name in the es6 spec, equal to '[Symbol.iterator]'\n  // we're going to use an arbitrary _-prefixed name to make our shims\n  // work properly with each other, even though we don't have full Iterator\n  // support.  That is, `Array.from(map.keys())` will work, but we don't\n  // pretend to export a \"real\" Iterator interface.\n  var $iterator$ = Type.symbol(Symbol.iterator) ? Symbol.iterator : '_es6-shim iterator_';\n  // Firefox ships a partial implementation using the name @@iterator.\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=907077#c14\n  // So use that name if we detect it.\n  if (globals.Set && typeof new globals.Set()['@@iterator'] === 'function') {\n    $iterator$ = '@@iterator';\n  }\n  var addIterator = function (prototype, impl) {\n    if (!impl) { impl = function iterator() { return this; }; }\n    var o = {};\n    o[$iterator$] = impl;\n    defineProperties(prototype, o);\n    if (!prototype[$iterator$] && Type.symbol($iterator$)) {\n      // implementations are buggy when $iterator$ is a Symbol\n      prototype[$iterator$] = impl;\n    }\n  };\n\n  // taken directly from https://github.com/ljharb/is-arguments/blob/master/index.js\n  // can be replaced with require('is-arguments') if we ever use a build process instead\n  var isArguments = function isArguments(value) {\n    var str = _toString(value);\n    var result = str === '[object Arguments]';\n    if (!result) {\n      result = str !== '[object Array]' &&\n        value !== null &&\n        typeof value === 'object' &&\n        typeof value.length === 'number' &&\n        value.length >= 0 &&\n        _toString(value.callee) === '[object Function]';\n    }\n    return result;\n  };\n\n  var ES = {\n    CheckObjectCoercible: function (x, optMessage) {\n      /* jshint eqnull:true */\n      if (x == null) {\n        throw new TypeError(optMessage || 'Cannot call method on ' + x);\n      }\n      return x;\n    },\n\n    TypeIsObject: function (x) {\n      /* jshint eqnull:true */\n      // this is expensive when it returns false; use this function\n      // when you expect it to return true in the common case.\n      return x != null && Object(x) === x;\n    },\n\n    ToObject: function (o, optMessage) {\n      return Object(ES.CheckObjectCoercible(o, optMessage));\n    },\n\n    IsCallable: function (x) {\n      // some versions of IE say that typeof /abc/ === 'function'\n      return typeof x === 'function' && _toString(x) === '[object Function]';\n    },\n\n    ToInt32: function (x) {\n      return ES.ToNumber(x) >> 0;\n    },\n\n    ToUint32: function (x) {\n      return ES.ToNumber(x) >>> 0;\n    },\n\n    ToNumber: function (value) {\n      if (_toString(value) === '[object Symbol]') {\n        throw new TypeError('Cannot convert a Symbol value to a number');\n      }\n      return +value;\n    },\n\n    ToInteger: function (value) {\n      var number = ES.ToNumber(value);\n      if (Number.isNaN(number)) { return 0; }\n      if (number === 0 || !Number.isFinite(number)) { return number; }\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n    },\n\n    ToLength: function (value) {\n      var len = ES.ToInteger(value);\n      if (len <= 0) { return 0; } // includes converting -0 to +0\n      if (len > Number.MAX_SAFE_INTEGER) { return Number.MAX_SAFE_INTEGER; }\n      return len;\n    },\n\n    SameValue: function (a, b) {\n      if (a === b) {\n        // 0 === -0, but they are not identical.\n        if (a === 0) { return 1 / a === 1 / b; }\n        return true;\n      }\n      return Number.isNaN(a) && Number.isNaN(b);\n    },\n\n    SameValueZero: function (a, b) {\n      // same as SameValue except for SameValueZero(+0, -0) == true\n      return (a === b) || (Number.isNaN(a) && Number.isNaN(b));\n    },\n\n    IsIterable: function (o) {\n      return ES.TypeIsObject(o) && (typeof o[$iterator$] !== 'undefined' || isArguments(o));\n    },\n\n    GetIterator: function (o) {\n      if (isArguments(o)) {\n        // special case support for `arguments`\n        return new ArrayIterator(o, 'value');\n      }\n      var itFn = o[$iterator$];\n      if (!ES.IsCallable(itFn)) {\n        throw new TypeError('value is not an iterable');\n      }\n      var it = itFn.call(o);\n      if (!ES.TypeIsObject(it)) {\n        throw new TypeError('bad iterator');\n      }\n      return it;\n    },\n\n    IteratorNext: function (it) {\n      var result = arguments.length > 1 ? it.next(arguments[1]) : it.next();\n      if (!ES.TypeIsObject(result)) {\n        throw new TypeError('bad iterator');\n      }\n      return result;\n    },\n\n    Construct: function (C, args) {\n      // CreateFromConstructor\n      var obj;\n      if (ES.IsCallable(C['@@create'])) {\n        obj = C['@@create']();\n      } else {\n        // OrdinaryCreateFromConstructor\n        obj = create(C.prototype || null);\n      }\n      // Mark that we've used the es6 construct path\n      // (see emulateES6construct)\n      defineProperties(obj, { _es6construct: true });\n      // Call the constructor.\n      var result = C.apply(obj, args);\n      return ES.TypeIsObject(result) ? result : obj;\n    }\n  };\n\n  var emulateES6construct = function (o) {\n    if (!ES.TypeIsObject(o)) { throw new TypeError('bad object'); }\n    // es5 approximation to es6 subclass semantics: in es6, 'new Foo'\n    // would invoke Foo.@@create to allocation/initialize the new object.\n    // In es5 we just get the plain object.  So if we detect an\n    // uninitialized object, invoke o.constructor.@@create\n    if (!o._es6construct) {\n      if (o.constructor && ES.IsCallable(o.constructor['@@create'])) {\n        o = o.constructor['@@create'](o);\n      }\n      defineProperties(o, { _es6construct: true });\n    }\n    return o;\n  };\n\n\n  var numberConversion = (function () {\n    // from https://github.com/inexorabletash/polyfill/blob/master/typedarray.js#L176-L266\n    // with permission and license, per https://twitter.com/inexorabletash/status/372206509540659200\n\n    function roundToEven(n) {\n      var w = Math.floor(n), f = n - w;\n      if (f < 0.5) {\n        return w;\n      }\n      if (f > 0.5) {\n        return w + 1;\n      }\n      return w % 2 ? w + 1 : w;\n    }\n\n    function packIEEE754(v, ebits, fbits) {\n      var bias = (1 << (ebits - 1)) - 1,\n        s, e, f,\n        i, bits, str, bytes;\n\n      // Compute sign, exponent, fraction\n      if (v !== v) {\n        // NaN\n        // http://dev.w3.org/2006/webapi/WebIDL/#es-type-mapping\n        e = (1 << ebits) - 1;\n        f = Math.pow(2, fbits - 1);\n        s = 0;\n      } else if (v === Infinity || v === -Infinity) {\n        e = (1 << ebits) - 1;\n        f = 0;\n        s = (v < 0) ? 1 : 0;\n      } else if (v === 0) {\n        e = 0;\n        f = 0;\n        s = (1 / v === -Infinity) ? 1 : 0;\n      } else {\n        s = v < 0;\n        v = Math.abs(v);\n\n        if (v >= Math.pow(2, 1 - bias)) {\n          e = Math.min(Math.floor(Math.log(v) / Math.LN2), 1023);\n          f = roundToEven(v / Math.pow(2, e) * Math.pow(2, fbits));\n          if (f / Math.pow(2, fbits) >= 2) {\n            e = e + 1;\n            f = 1;\n          }\n          if (e > bias) {\n            // Overflow\n            e = (1 << ebits) - 1;\n            f = 0;\n          } else {\n            // Normal\n            e = e + bias;\n            f = f - Math.pow(2, fbits);\n          }\n        } else {\n          // Subnormal\n          e = 0;\n          f = roundToEven(v / Math.pow(2, 1 - bias - fbits));\n        }\n      }\n\n      // Pack sign, exponent, fraction\n      bits = [];\n      for (i = fbits; i; i -= 1) {\n        bits.push(f % 2 ? 1 : 0);\n        f = Math.floor(f / 2);\n      }\n      for (i = ebits; i; i -= 1) {\n        bits.push(e % 2 ? 1 : 0);\n        e = Math.floor(e / 2);\n      }\n      bits.push(s ? 1 : 0);\n      bits.reverse();\n      str = bits.join('');\n\n      // Bits to bytes\n      bytes = [];\n      while (str.length) {\n        bytes.push(parseInt(str.slice(0, 8), 2));\n        str = str.slice(8);\n      }\n      return bytes;\n    }\n\n    function unpackIEEE754(bytes, ebits, fbits) {\n      // Bytes to bits\n      var bits = [], i, j, b, str,\n          bias, s, e, f;\n\n      for (i = bytes.length; i; i -= 1) {\n        b = bytes[i - 1];\n        for (j = 8; j; j -= 1) {\n          bits.push(b % 2 ? 1 : 0);\n          b = b >> 1;\n        }\n      }\n      bits.reverse();\n      str = bits.join('');\n\n      // Unpack sign, exponent, fraction\n      bias = (1 << (ebits - 1)) - 1;\n      s = parseInt(str.slice(0, 1), 2) ? -1 : 1;\n      e = parseInt(str.slice(1, 1 + ebits), 2);\n      f = parseInt(str.slice(1 + ebits), 2);\n\n      // Produce number\n      if (e === (1 << ebits) - 1) {\n        return f !== 0 ? NaN : s * Infinity;\n      } else if (e > 0) {\n        // Normalized\n        return s * Math.pow(2, e - bias) * (1 + f / Math.pow(2, fbits));\n      } else if (f !== 0) {\n        // Denormalized\n        return s * Math.pow(2, -(bias - 1)) * (f / Math.pow(2, fbits));\n      } else {\n        return s < 0 ? -0 : 0;\n      }\n    }\n\n    function unpackFloat64(b) { return unpackIEEE754(b, 11, 52); }\n    function packFloat64(v) { return packIEEE754(v, 11, 52); }\n    function unpackFloat32(b) { return unpackIEEE754(b, 8, 23); }\n    function packFloat32(v) { return packIEEE754(v, 8, 23); }\n\n    var conversions = {\n      toFloat32: function (num) { return unpackFloat32(packFloat32(num)); }\n    };\n    if (typeof Float32Array !== 'undefined') {\n      var float32array = new Float32Array(1);\n      conversions.toFloat32 = function (num) {\n        float32array[0] = num;\n        return float32array[0];\n      };\n    }\n    return conversions;\n  }());\n\n  defineProperties(String, {\n    fromCodePoint: function fromCodePoint(codePoints) {\n      var result = [];\n      var next;\n      for (var i = 0, length = arguments.length; i < length; i++) {\n        next = Number(arguments[i]);\n        if (!ES.SameValue(next, ES.ToInteger(next)) || next < 0 || next > 0x10FFFF) {\n          throw new RangeError('Invalid code point ' + next);\n        }\n\n        if (next < 0x10000) {\n          result.push(String.fromCharCode(next));\n        } else {\n          next -= 0x10000;\n          result.push(String.fromCharCode((next >> 10) + 0xD800));\n          result.push(String.fromCharCode((next % 0x400) + 0xDC00));\n        }\n      }\n      return result.join('');\n    },\n\n    raw: function raw(callSite) {\n      var cooked = ES.ToObject(callSite, 'bad callSite');\n      var rawValue = cooked.raw;\n      var rawString = ES.ToObject(rawValue, 'bad raw value');\n      var len = rawString.length;\n      var literalsegments = ES.ToLength(len);\n      if (literalsegments <= 0) {\n        return '';\n      }\n\n      var stringElements = [];\n      var nextIndex = 0;\n      var nextKey, next, nextSeg, nextSub;\n      while (nextIndex < literalsegments) {\n        nextKey = String(nextIndex);\n        next = rawString[nextKey];\n        nextSeg = String(next);\n        stringElements.push(nextSeg);\n        if (nextIndex + 1 >= literalsegments) {\n          break;\n        }\n        next = nextIndex + 1 < arguments.length ? arguments[nextIndex + 1] : '';\n        nextSub = String(next);\n        stringElements.push(nextSub);\n        nextIndex++;\n      }\n      return stringElements.join('');\n    }\n  });\n\n  // Firefox 31 reports this function's length as 0\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1062484\n  if (String.fromCodePoint.length !== 1) {\n    var originalFromCodePoint = Function.apply.bind(String.fromCodePoint);\n    defineProperty(String, 'fromCodePoint', function fromCodePoint(codePoints) { return originalFromCodePoint(this, arguments); }, true);\n  }\n\n  var StringShims = {\n    // Fast repeat, uses the `Exponentiation by squaring` algorithm.\n    // Perf: http://jsperf.com/string-repeat2/2\n    repeat: (function () {\n      var repeat = function (s, times) {\n        if (times < 1) { return ''; }\n        if (times % 2) { return repeat(s, times - 1) + s; }\n        var half = repeat(s, times / 2);\n        return half + half;\n      };\n\n      return function (times) {\n        var thisStr = String(ES.CheckObjectCoercible(this));\n        times = ES.ToInteger(times);\n        if (times < 0 || times === Infinity) {\n          throw new RangeError('Invalid String#repeat value');\n        }\n        return repeat(thisStr, times);\n      };\n    }()),\n\n    startsWith: function (searchStr) {\n      var thisStr = String(ES.CheckObjectCoercible(this));\n      if (Type.regex(searchStr)) {\n        throw new TypeError('Cannot call method \"startsWith\" with a regex');\n      }\n      searchStr = String(searchStr);\n      var startArg = arguments.length > 1 ? arguments[1] : void 0;\n      var start = Math.max(ES.ToInteger(startArg), 0);\n      return thisStr.slice(start, start + searchStr.length) === searchStr;\n    },\n\n    endsWith: function (searchStr) {\n      var thisStr = String(ES.CheckObjectCoercible(this));\n      if (Type.regex(searchStr)) {\n        throw new TypeError('Cannot call method \"endsWith\" with a regex');\n      }\n      searchStr = String(searchStr);\n      var thisLen = thisStr.length;\n      var posArg = arguments.length > 1 ? arguments[1] : void 0;\n      var pos = typeof posArg === 'undefined' ? thisLen : ES.ToInteger(posArg);\n      var end = Math.min(Math.max(pos, 0), thisLen);\n      return thisStr.slice(end - searchStr.length, end) === searchStr;\n    },\n\n    includes: function includes(searchString) {\n      var position = arguments.length > 1 ? arguments[1] : void 0;\n      // Somehow this trick makes method 100% compat with the spec.\n      return _indexOf(this, searchString, position) !== -1;\n    },\n\n    codePointAt: function (pos) {\n      var thisStr = String(ES.CheckObjectCoercible(this));\n      var position = ES.ToInteger(pos);\n      var length = thisStr.length;\n      if (position >= 0 && position < length) {\n        var first = thisStr.charCodeAt(position);\n        var isEnd = (position + 1 === length);\n        if (first < 0xD800 || first > 0xDBFF || isEnd) { return first; }\n        var second = thisStr.charCodeAt(position + 1);\n        if (second < 0xDC00 || second > 0xDFFF) { return first; }\n        return ((first - 0xD800) * 1024) + (second - 0xDC00) + 0x10000;\n      }\n    }\n  };\n  defineProperties(String.prototype, StringShims);\n\n  var hasStringTrimBug = '\\u0085'.trim().length !== 1;\n  if (hasStringTrimBug) {\n    delete String.prototype.trim;\n    // whitespace from: http://es5.github.io/#x15.5.4.20\n    // implementation from https://github.com/es-shims/es5-shim/blob/v3.4.0/es5-shim.js#L1304-L1324\n    var ws = [\n      '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003',\n      '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028',\n      '\\u2029\\uFEFF'\n    ].join('');\n    var trimRegexp = new RegExp('(^[' + ws + ']+)|([' + ws + ']+$)', 'g');\n    defineProperties(String.prototype, {\n      trim: function () {\n        if (typeof this === 'undefined' || this === null) {\n          throw new TypeError(\"can't convert \" + this + ' to object');\n        }\n        return String(this).replace(trimRegexp, '');\n      }\n    });\n  }\n\n  // see https://people.mozilla.org/~jorendorff/es6-draft.html#sec-string.prototype-@@iterator\n  var StringIterator = function (s) {\n    this._s = String(ES.CheckObjectCoercible(s));\n    this._i = 0;\n  };\n  StringIterator.prototype.next = function () {\n    var s = this._s, i = this._i;\n    if (typeof s === 'undefined' || i >= s.length) {\n      this._s = void 0;\n      return { value: void 0, done: true };\n    }\n    var first = s.charCodeAt(i), second, len;\n    if (first < 0xD800 || first > 0xDBFF || (i + 1) === s.length) {\n      len = 1;\n    } else {\n      second = s.charCodeAt(i + 1);\n      len = (second < 0xDC00 || second > 0xDFFF) ? 1 : 2;\n    }\n    this._i = i + len;\n    return { value: s.substr(i, len), done: false };\n  };\n  addIterator(StringIterator.prototype);\n  addIterator(String.prototype, function () {\n    return new StringIterator(this);\n  });\n\n  if (!startsWithIsCompliant) {\n    // Firefox has a noncompliant startsWith implementation\n    defineProperties(String.prototype, {\n      startsWith: StringShims.startsWith,\n      endsWith: StringShims.endsWith\n    });\n  }\n\n  var ArrayShims = {\n    from: function (iterable) {\n      var mapFn = arguments.length > 1 ? arguments[1] : void 0;\n\n      var list = ES.ToObject(iterable, 'bad iterable');\n      if (typeof mapFn !== 'undefined' && !ES.IsCallable(mapFn)) {\n        throw new TypeError('Array.from: when provided, the second argument must be a function');\n      }\n\n      var hasThisArg = arguments.length > 2;\n      var thisArg = hasThisArg ? arguments[2] : void 0;\n\n      var usingIterator = ES.IsIterable(list);\n      // does the spec really mean that Arrays should use ArrayIterator?\n      // https://bugs.ecmascript.org/show_bug.cgi?id=2416\n      //if (Array.isArray(list)) { usingIterator=false; }\n\n      var length;\n      var result, i, value;\n      if (usingIterator) {\n        i = 0;\n        result = ES.IsCallable(this) ? Object(new this()) : [];\n        var it = usingIterator ? ES.GetIterator(list) : null;\n        var iterationValue;\n\n        do {\n          iterationValue = ES.IteratorNext(it);\n          if (!iterationValue.done) {\n            value = iterationValue.value;\n            if (mapFn) {\n              result[i] = hasThisArg ? mapFn.call(thisArg, value, i) : mapFn(value, i);\n            } else {\n              result[i] = value;\n            }\n            i += 1;\n          }\n        } while (!iterationValue.done);\n        length = i;\n      } else {\n        length = ES.ToLength(list.length);\n        result = ES.IsCallable(this) ? Object(new this(length)) : new Array(length);\n        for (i = 0; i < length; ++i) {\n          value = list[i];\n          if (mapFn) {\n            result[i] = hasThisArg ? mapFn.call(thisArg, value, i) : mapFn(value, i);\n          } else {\n            result[i] = value;\n          }\n        }\n      }\n\n      result.length = length;\n      return result;\n    },\n\n    of: function () {\n      return Array.from(arguments);\n    }\n  };\n  defineProperties(Array, ArrayShims);\n\n  var arrayFromSwallowsNegativeLengths = function () {\n    try {\n      return Array.from({ length: -1 }).length === 0;\n    } catch (e) {\n      return false;\n    }\n  };\n  // Fixes a Firefox bug in v32\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1063993\n  if (!arrayFromSwallowsNegativeLengths()) {\n    defineProperty(Array, 'from', ArrayShims.from, true);\n  }\n\n  // Our ArrayIterator is private; see\n  // https://github.com/paulmillr/es6-shim/issues/252\n  ArrayIterator = function (array, kind) {\n      this.i = 0;\n      this.array = array;\n      this.kind = kind;\n  };\n\n  defineProperties(ArrayIterator.prototype, {\n    next: function () {\n      var i = this.i, array = this.array;\n      if (!(this instanceof ArrayIterator)) {\n        throw new TypeError('Not an ArrayIterator');\n      }\n      if (typeof array !== 'undefined') {\n        var len = ES.ToLength(array.length);\n        for (; i < len; i++) {\n          var kind = this.kind;\n          var retval;\n          if (kind === 'key') {\n            retval = i;\n          } else if (kind === 'value') {\n            retval = array[i];\n          } else if (kind === 'entry') {\n            retval = [i, array[i]];\n          }\n          this.i = i + 1;\n          return { value: retval, done: false };\n        }\n      }\n      this.array = void 0;\n      return { value: void 0, done: true };\n    }\n  });\n  addIterator(ArrayIterator.prototype);\n\n  var ArrayPrototypeShims = {\n    copyWithin: function (target, start) {\n      var end = arguments[2]; // copyWithin.length must be 2\n      var o = ES.ToObject(this);\n      var len = ES.ToLength(o.length);\n      target = ES.ToInteger(target);\n      start = ES.ToInteger(start);\n      var to = target < 0 ? Math.max(len + target, 0) : Math.min(target, len);\n      var from = start < 0 ? Math.max(len + start, 0) : Math.min(start, len);\n      end = typeof end === 'undefined' ? len : ES.ToInteger(end);\n      var fin = end < 0 ? Math.max(len + end, 0) : Math.min(end, len);\n      var count = Math.min(fin - from, len - to);\n      var direction = 1;\n      if (from < to && to < (from + count)) {\n        direction = -1;\n        from += count - 1;\n        to += count - 1;\n      }\n      while (count > 0) {\n        if (_hasOwnProperty(o, from)) {\n          o[to] = o[from];\n        } else {\n          delete o[from];\n        }\n        from += direction;\n        to += direction;\n        count -= 1;\n      }\n      return o;\n    },\n\n    fill: function (value) {\n      var start = arguments.length > 1 ? arguments[1] : void 0;\n      var end = arguments.length > 2 ? arguments[2] : void 0;\n      var O = ES.ToObject(this);\n      var len = ES.ToLength(O.length);\n      start = ES.ToInteger(typeof start === 'undefined' ? 0 : start);\n      end = ES.ToInteger(typeof end === 'undefined' ? len : end);\n\n      var relativeStart = start < 0 ? Math.max(len + start, 0) : Math.min(start, len);\n      var relativeEnd = end < 0 ? len + end : end;\n\n      for (var i = relativeStart; i < len && i < relativeEnd; ++i) {\n        O[i] = value;\n      }\n      return O;\n    },\n\n    find: function find(predicate) {\n      var list = ES.ToObject(this);\n      var length = ES.ToLength(list.length);\n      if (!ES.IsCallable(predicate)) {\n        throw new TypeError('Array#find: predicate must be a function');\n      }\n      var thisArg = arguments.length > 1 ? arguments[1] : null;\n      for (var i = 0, value; i < length; i++) {\n        value = list[i];\n        if (thisArg) {\n          if (predicate.call(thisArg, value, i, list)) { return value; }\n        } else if (predicate(value, i, list)) {\n          return value;\n        }\n      }\n    },\n\n    findIndex: function findIndex(predicate) {\n      var list = ES.ToObject(this);\n      var length = ES.ToLength(list.length);\n      if (!ES.IsCallable(predicate)) {\n        throw new TypeError('Array#findIndex: predicate must be a function');\n      }\n      var thisArg = arguments.length > 1 ? arguments[1] : null;\n      for (var i = 0; i < length; i++) {\n        if (thisArg) {\n          if (predicate.call(thisArg, list[i], i, list)) { return i; }\n        } else if (predicate(list[i], i, list)) {\n          return i;\n        }\n      }\n      return -1;\n    },\n\n    keys: function () {\n      return new ArrayIterator(this, 'key');\n    },\n\n    values: function () {\n      return new ArrayIterator(this, 'value');\n    },\n\n    entries: function () {\n      return new ArrayIterator(this, 'entry');\n    }\n  };\n  // Safari 7.1 defines Array#keys and Array#entries natively,\n  // but the resulting ArrayIterator objects don't have a \"next\" method.\n  if (Array.prototype.keys && !ES.IsCallable([1].keys().next)) {\n    delete Array.prototype.keys;\n  }\n  if (Array.prototype.entries && !ES.IsCallable([1].entries().next)) {\n    delete Array.prototype.entries;\n  }\n\n  // Chrome 38 defines Array#keys and Array#entries, and Array#@@iterator, but not Array#values\n  if (Array.prototype.keys && Array.prototype.entries && !Array.prototype.values && Array.prototype[$iterator$]) {\n    defineProperties(Array.prototype, {\n      values: Array.prototype[$iterator$]\n    });\n    if (Type.symbol(Symbol.unscopables)) {\n      Array.prototype[Symbol.unscopables].values = true;\n    }\n  }\n  defineProperties(Array.prototype, ArrayPrototypeShims);\n\n  addIterator(Array.prototype, function () { return this.values(); });\n  // Chrome defines keys/values/entries on Array, but doesn't give us\n  // any way to identify its iterator.  So add our own shimmed field.\n  if (Object.getPrototypeOf) {\n    addIterator(Object.getPrototypeOf([].values()));\n  }\n\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n  defineProperties(Number, {\n    MAX_SAFE_INTEGER: maxSafeInteger,\n    MIN_SAFE_INTEGER: -maxSafeInteger,\n    EPSILON: 2.220446049250313e-16,\n\n    parseInt: globals.parseInt,\n    parseFloat: globals.parseFloat,\n\n    isFinite: function (value) {\n      return typeof value === 'number' && global_isFinite(value);\n    },\n\n    isInteger: function (value) {\n      return Number.isFinite(value) && ES.ToInteger(value) === value;\n    },\n\n    isSafeInteger: function (value) {\n      return Number.isInteger(value) && Math.abs(value) <= Number.MAX_SAFE_INTEGER;\n    },\n\n    isNaN: function (value) {\n      // NaN !== NaN, but they are identical.\n      // NaNs are the only non-reflexive value, i.e., if x !== x,\n      // then x is NaN.\n      // isNaN is broken: it converts its argument to number, so\n      // isNaN('foo') => true\n      return value !== value;\n    }\n  });\n\n  // Work around bugs in Array#find and Array#findIndex -- early\n  // implementations skipped holes in sparse arrays. (Note that the\n  // implementations of find/findIndex indirectly use shimmed\n  // methods of Number, so this test has to happen down here.)\n  if (![, 1].find(function (item, idx) { return idx === 0; })) {\n    defineProperty(Array.prototype, 'find', ArrayPrototypeShims.find, true);\n  }\n  if ([, 1].findIndex(function (item, idx) { return idx === 0; }) !== 0) {\n    defineProperty(Array.prototype, 'findIndex', ArrayPrototypeShims.findIndex, true);\n  }\n\n  if (supportsDescriptors) {\n    defineProperties(Object, {\n      // 19.1.3.1\n      assign: function (target, source) {\n        if (!ES.TypeIsObject(target)) {\n          throw new TypeError('target must be an object');\n        }\n        return Array.prototype.reduce.call(arguments, function (target, source) {\n          return Object.keys(Object(source)).reduce(function (target, key) {\n            target[key] = source[key];\n            return target;\n          }, target);\n        });\n      },\n\n      is: function (a, b) {\n        return ES.SameValue(a, b);\n      },\n\n      // 19.1.3.9\n      // shim from https://gist.github.com/WebReflection/5593554\n      setPrototypeOf: (function (Object, magic) {\n        var set;\n\n        var checkArgs = function (O, proto) {\n          if (!ES.TypeIsObject(O)) {\n            throw new TypeError('cannot set prototype on a non-object');\n          }\n          if (!(proto === null || ES.TypeIsObject(proto))) {\n            throw new TypeError('can only set prototype to an object or null' + proto);\n          }\n        };\n\n        var setPrototypeOf = function (O, proto) {\n          checkArgs(O, proto);\n          set.call(O, proto);\n          return O;\n        };\n\n        try {\n          // this works already in Firefox and Safari\n          set = Object.getOwnPropertyDescriptor(Object.prototype, magic).set;\n          set.call({}, null);\n        } catch (e) {\n          if (Object.prototype !== {}[magic]) {\n            // IE < 11 cannot be shimmed\n            return;\n          }\n          // probably Chrome or some old Mobile stock browser\n          set = function (proto) {\n            this[magic] = proto;\n          };\n          // please note that this will **not** work\n          // in those browsers that do not inherit\n          // __proto__ by mistake from Object.prototype\n          // in these cases we should probably throw an error\n          // or at least be informed about the issue\n          setPrototypeOf.polyfill = setPrototypeOf(\n            setPrototypeOf({}, null),\n            Object.prototype\n          ) instanceof Object;\n          // setPrototypeOf.polyfill === true means it works as meant\n          // setPrototypeOf.polyfill === false means it's not 100% reliable\n          // setPrototypeOf.polyfill === undefined\n          // or\n          // setPrototypeOf.polyfill ==  null means it's not a polyfill\n          // which means it works as expected\n          // we can even delete Object.prototype.__proto__;\n        }\n        return setPrototypeOf;\n      }(Object, '__proto__'))\n    });\n  }\n\n  // Workaround bug in Opera 12 where setPrototypeOf(x, null) doesn't work,\n  // but Object.create(null) does.\n  if (Object.setPrototypeOf && Object.getPrototypeOf &&\n      Object.getPrototypeOf(Object.setPrototypeOf({}, null)) !== null &&\n      Object.getPrototypeOf(Object.create(null)) === null) {\n    (function () {\n      var FAKENULL = Object.create(null);\n      var gpo = Object.getPrototypeOf, spo = Object.setPrototypeOf;\n      Object.getPrototypeOf = function (o) {\n        var result = gpo(o);\n        return result === FAKENULL ? null : result;\n      };\n      Object.setPrototypeOf = function (o, p) {\n        if (p === null) { p = FAKENULL; }\n        return spo(o, p);\n      };\n      Object.setPrototypeOf.polyfill = false;\n    }());\n  }\n\n  try {\n    Object.keys('foo');\n  } catch (e) {\n    var originalObjectKeys = Object.keys;\n    Object.keys = function (obj) {\n      return originalObjectKeys(ES.ToObject(obj));\n    };\n  }\n\n  if (!RegExp.prototype.flags && supportsDescriptors) {\n    var regExpFlagsGetter = function flags() {\n      if (!ES.TypeIsObject(this)) {\n        throw new TypeError('Method called on incompatible type: must be an object.');\n      }\n      var result = '';\n      if (this.global) {\n        result += 'g';\n      }\n      if (this.ignoreCase) {\n        result += 'i';\n      }\n      if (this.multiline) {\n        result += 'm';\n      }\n      if (this.unicode) {\n        result += 'u';\n      }\n      if (this.sticky) {\n        result += 'y';\n      }\n      return result;\n    };\n\n    Value.getter(RegExp.prototype, 'flags', regExpFlagsGetter);\n  }\n\n  var regExpSupportsFlagsWithRegex = (function () {\n    try {\n      return String(new RegExp(/a/g, 'i')) === '/a/i';\n    } catch (e) {\n      return false;\n    }\n  }());\n\n  if (!regExpSupportsFlagsWithRegex && supportsDescriptors) {\n    var OrigRegExp = RegExp;\n    var RegExpShim = function RegExp(pattern, flags) {\n      if (Type.regex(pattern) && Type.string(flags)) {\n        return new RegExp(pattern.source, flags);\n      }\n      return new OrigRegExp(pattern, flags);\n    };\n    defineProperty(RegExpShim, 'toString', OrigRegExp.toString.bind(OrigRegExp), true);\n    if (Object.setPrototypeOf) {\n      // sets up proper prototype chain where possible\n      Object.setPrototypeOf(OrigRegExp, RegExpShim);\n    }\n    Object.getOwnPropertyNames(OrigRegExp).forEach(function (key) {\n      if (key === '$input') { return; } // Chrome < v39 & Opera < 26 have a nonstandard \"$input\" property\n      if (key in noop) { return; }\n      Value.proxy(OrigRegExp, key, RegExpShim);\n    });\n    RegExpShim.prototype = OrigRegExp.prototype;\n    Value.redefine(OrigRegExp.prototype, 'constructor', RegExpShim);\n    /*globals RegExp: true */\n    RegExp = RegExpShim;\n    Value.redefine(globals, 'RegExp', RegExpShim);\n    /*globals RegExp: false */\n  }\n\n  var MathShims = {\n    acosh: function (value) {\n      value = Number(value);\n      if (Number.isNaN(value) || value < 1) { return NaN; }\n      if (value === 1) { return 0; }\n      if (value === Infinity) { return value; }\n      return Math.log(value + Math.sqrt(value * value - 1));\n    },\n\n    asinh: function (value) {\n      value = Number(value);\n      if (value === 0 || !global_isFinite(value)) {\n        return value;\n      }\n      return value < 0 ? -Math.asinh(-value) : Math.log(value + Math.sqrt(value * value + 1));\n    },\n\n    atanh: function (value) {\n      value = Number(value);\n      if (Number.isNaN(value) || value < -1 || value > 1) {\n        return NaN;\n      }\n      if (value === -1) { return -Infinity; }\n      if (value === 1) { return Infinity; }\n      if (value === 0) { return value; }\n      return 0.5 * Math.log((1 + value) / (1 - value));\n    },\n\n    cbrt: function (value) {\n      value = Number(value);\n      if (value === 0) { return value; }\n      var negate = value < 0, result;\n      if (negate) { value = -value; }\n      result = Math.pow(value, 1 / 3);\n      return negate ? -result : result;\n    },\n\n    clz32: function (value) {\n      // See https://bugs.ecmascript.org/show_bug.cgi?id=2465\n      value = Number(value);\n      var number = ES.ToUint32(value);\n      if (number === 0) {\n        return 32;\n      }\n      return 32 - (number).toString(2).length;\n    },\n\n    cosh: function (value) {\n      value = Number(value);\n      if (value === 0) { return 1; } // +0 or -0\n      if (Number.isNaN(value)) { return NaN; }\n      if (!global_isFinite(value)) { return Infinity; }\n      if (value < 0) { value = -value; }\n      if (value > 21) { return Math.exp(value) / 2; }\n      return (Math.exp(value) + Math.exp(-value)) / 2;\n    },\n\n    expm1: function (value) {\n      value = Number(value);\n      if (value === -Infinity) { return -1; }\n      if (!global_isFinite(value) || value === 0) { return value; }\n      return Math.exp(value) - 1;\n    },\n\n    hypot: function (x, y) {\n      var anyNaN = false;\n      var allZero = true;\n      var anyInfinity = false;\n      var numbers = [];\n      Array.prototype.every.call(arguments, function (arg) {\n        var num = Number(arg);\n        if (Number.isNaN(num)) {\n          anyNaN = true;\n        } else if (num === Infinity || num === -Infinity) {\n          anyInfinity = true;\n        } else if (num !== 0) {\n          allZero = false;\n        }\n        if (anyInfinity) {\n          return false;\n        } else if (!anyNaN) {\n          numbers.push(Math.abs(num));\n        }\n        return true;\n      });\n      if (anyInfinity) { return Infinity; }\n      if (anyNaN) { return NaN; }\n      if (allZero) { return 0; }\n\n      numbers.sort(function (a, b) { return b - a; });\n      var largest = numbers[0];\n      var divided = numbers.map(function (number) { return number / largest; });\n      var sum = divided.reduce(function (sum, number) { return sum + (number * number); }, 0);\n      return largest * Math.sqrt(sum);\n    },\n\n    log2: function (value) {\n      return Math.log(value) * Math.LOG2E;\n    },\n\n    log10: function (value) {\n      return Math.log(value) * Math.LOG10E;\n    },\n\n    log1p: function (value) {\n      value = Number(value);\n      if (value < -1 || Number.isNaN(value)) { return NaN; }\n      if (value === 0 || value === Infinity) { return value; }\n      if (value === -1) { return -Infinity; }\n      var result = 0;\n      var n = 50;\n\n      if (value < 0 || value > 1) { return Math.log(1 + value); }\n      for (var i = 1; i < n; i++) {\n        if ((i % 2) === 0) {\n          result -= Math.pow(value, i) / i;\n        } else {\n          result += Math.pow(value, i) / i;\n        }\n      }\n\n      return result;\n    },\n\n    sign: function (value) {\n      var number = +value;\n      if (number === 0) { return number; }\n      if (Number.isNaN(number)) { return number; }\n      return number < 0 ? -1 : 1;\n    },\n\n    sinh: function (value) {\n      value = Number(value);\n      if (!global_isFinite(value) || value === 0) { return value; }\n      return (Math.exp(value) - Math.exp(-value)) / 2;\n    },\n\n    tanh: function (value) {\n      value = Number(value);\n      if (Number.isNaN(value) || value === 0) { return value; }\n      if (value === Infinity) { return 1; }\n      if (value === -Infinity) { return -1; }\n      return (Math.exp(value) - Math.exp(-value)) / (Math.exp(value) + Math.exp(-value));\n    },\n\n    trunc: function (value) {\n      var number = Number(value);\n      return number < 0 ? -Math.floor(-number) : Math.floor(number);\n    },\n\n    imul: function (x, y) {\n      // taken from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul\n      x = ES.ToUint32(x);\n      y = ES.ToUint32(y);\n      var ah = (x >>> 16) & 0xffff;\n      var al = x & 0xffff;\n      var bh = (y >>> 16) & 0xffff;\n      var bl = y & 0xffff;\n      // the shift by 0 fixes the sign on the high part\n      // the final |0 converts the unsigned value into a signed value\n      return ((al * bl) + (((ah * bl + al * bh) << 16) >>> 0) | 0);\n    },\n\n    fround: function (x) {\n      if (x === 0 || x === Infinity || x === -Infinity || Number.isNaN(x)) {\n        return x;\n      }\n      var num = Number(x);\n      return numberConversion.toFloat32(num);\n    }\n  };\n  defineProperties(Math, MathShims);\n\n  if (Math.imul(0xffffffff, 5) !== -5) {\n    // Safari 6.1, at least, reports \"0\" for this value\n    Math.imul = MathShims.imul;\n  }\n\n  // Promises\n  // Simplest possible implementation; use a 3rd-party library if you\n  // want the best possible speed and/or long stack traces.\n  var PromiseShim = (function () {\n\n    var Promise, Promise$prototype;\n\n    ES.IsPromise = function (promise) {\n      if (!ES.TypeIsObject(promise)) {\n        return false;\n      }\n      if (!promise._promiseConstructor) {\n        // _promiseConstructor is a bit more unique than _status, so we'll\n        // check that instead of the [[PromiseStatus]] internal field.\n        return false;\n      }\n      if (typeof promise._status === 'undefined') {\n        return false; // uninitialized\n      }\n      return true;\n    };\n\n    // \"PromiseCapability\" in the spec is what most promise implementations\n    // call a \"deferred\".\n    var PromiseCapability = function (C) {\n      if (!ES.IsCallable(C)) {\n        throw new TypeError('bad promise constructor');\n      }\n      var capability = this;\n      var resolver = function (resolve, reject) {\n        capability.resolve = resolve;\n        capability.reject = reject;\n      };\n      capability.promise = ES.Construct(C, [resolver]);\n      // see https://bugs.ecmascript.org/show_bug.cgi?id=2478\n      if (!capability.promise._es6construct) {\n        throw new TypeError('bad promise constructor');\n      }\n      if (!(ES.IsCallable(capability.resolve) && ES.IsCallable(capability.reject))) {\n        throw new TypeError('bad promise constructor');\n      }\n    };\n\n    // find an appropriate setImmediate-alike\n    var setTimeout = globals.setTimeout;\n    var makeZeroTimeout;\n    /*global window */\n    if (typeof window !== 'undefined' && ES.IsCallable(window.postMessage)) {\n      makeZeroTimeout = function () {\n        // from http://dbaron.org/log/20100309-faster-timeouts\n        var timeouts = [];\n        var messageName = 'zero-timeout-message';\n        var setZeroTimeout = function (fn) {\n          timeouts.push(fn);\n          window.postMessage(messageName, '*');\n        };\n        var handleMessage = function (event) {\n          if (event.source === window && event.data === messageName) {\n            event.stopPropagation();\n            if (timeouts.length === 0) { return; }\n            var fn = timeouts.shift();\n            fn();\n          }\n        };\n        window.addEventListener('message', handleMessage, true);\n        return setZeroTimeout;\n      };\n    }\n    var makePromiseAsap = function () {\n      // An efficient task-scheduler based on a pre-existing Promise\n      // implementation, which we can use even if we override the\n      // global Promise below (in order to workaround bugs)\n      // https://github.com/Raynos/observ-hash/issues/2#issuecomment-35857671\n      var P = globals.Promise;\n      return P && P.resolve && function (task) {\n        return P.resolve().then(task);\n      };\n    };\n    /*global process */\n    var enqueue = ES.IsCallable(globals.setImmediate) ?\n      globals.setImmediate.bind(globals) :\n      typeof process === 'object' && process.nextTick ? process.nextTick :\n      makePromiseAsap() ||\n      (ES.IsCallable(makeZeroTimeout) ? makeZeroTimeout() :\n      function (task) { setTimeout(task, 0); }); // fallback\n\n    var updatePromiseFromPotentialThenable = function (x, capability) {\n      if (!ES.TypeIsObject(x)) {\n        return false;\n      }\n      var resolve = capability.resolve;\n      var reject = capability.reject;\n      try {\n        var then = x.then; // only one invocation of accessor\n        if (!ES.IsCallable(then)) { return false; }\n        then.call(x, resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n      return true;\n    };\n\n    var triggerPromiseReactions = function (reactions, x) {\n      reactions.forEach(function (reaction) {\n        enqueue(function () {\n          // PromiseReactionTask\n          var handler = reaction.handler;\n          var capability = reaction.capability;\n          var resolve = capability.resolve;\n          var reject = capability.reject;\n          try {\n            var result = handler(x);\n            if (result === capability.promise) {\n              throw new TypeError('self resolution');\n            }\n            var updateResult =\n              updatePromiseFromPotentialThenable(result, capability);\n            if (!updateResult) {\n              resolve(result);\n            }\n          } catch (e) {\n            reject(e);\n          }\n        });\n      });\n    };\n\n    var promiseResolutionHandler = function (promise, onFulfilled, onRejected) {\n      return function (x) {\n        if (x === promise) {\n          return onRejected(new TypeError('self resolution'));\n        }\n        var C = promise._promiseConstructor;\n        var capability = new PromiseCapability(C);\n        var updateResult = updatePromiseFromPotentialThenable(x, capability);\n        if (updateResult) {\n          return capability.promise.then(onFulfilled, onRejected);\n        } else {\n          return onFulfilled(x);\n        }\n      };\n    };\n\n    Promise = function (resolver) {\n      var promise = this;\n      promise = emulateES6construct(promise);\n      if (!promise._promiseConstructor) {\n        // we use _promiseConstructor as a stand-in for the internal\n        // [[PromiseStatus]] field; it's a little more unique.\n        throw new TypeError('bad promise');\n      }\n      if (typeof promise._status !== 'undefined') {\n        throw new TypeError('promise already initialized');\n      }\n      // see https://bugs.ecmascript.org/show_bug.cgi?id=2482\n      if (!ES.IsCallable(resolver)) {\n        throw new TypeError('not a valid resolver');\n      }\n      promise._status = 'unresolved';\n      promise._resolveReactions = [];\n      promise._rejectReactions = [];\n\n      var resolve = function (resolution) {\n        if (promise._status !== 'unresolved') { return; }\n        var reactions = promise._resolveReactions;\n        promise._result = resolution;\n        promise._resolveReactions = void 0;\n        promise._rejectReactions = void 0;\n        promise._status = 'has-resolution';\n        triggerPromiseReactions(reactions, resolution);\n      };\n      var reject = function (reason) {\n        if (promise._status !== 'unresolved') { return; }\n        var reactions = promise._rejectReactions;\n        promise._result = reason;\n        promise._resolveReactions = void 0;\n        promise._rejectReactions = void 0;\n        promise._status = 'has-rejection';\n        triggerPromiseReactions(reactions, reason);\n      };\n      try {\n        resolver(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n      return promise;\n    };\n    Promise$prototype = Promise.prototype;\n    var _promiseAllResolver = function (index, values, capability, remaining) {\n      var done = false;\n      return function (x) {\n        if (done) { return; } // protect against being called multiple times\n        done = true;\n        values[index] = x;\n        if ((--remaining.count) === 0) {\n          var resolve = capability.resolve;\n          resolve(values); // call w/ this===undefined\n        }\n      };\n    };\n\n    defineProperties(Promise, {\n      '@@create': function (obj) {\n        var constructor = this;\n        // AllocatePromise\n        // The `obj` parameter is a hack we use for es5\n        // compatibility.\n        var prototype = constructor.prototype || Promise$prototype;\n        obj = obj || create(prototype);\n        defineProperties(obj, {\n          _status: void 0,\n          _result: void 0,\n          _resolveReactions: void 0,\n          _rejectReactions: void 0,\n          _promiseConstructor: void 0\n        });\n        obj._promiseConstructor = constructor;\n        return obj;\n      },\n\n      all: function all(iterable) {\n        var C = this;\n        var capability = new PromiseCapability(C);\n        var resolve = capability.resolve;\n        var reject = capability.reject;\n        try {\n          if (!ES.IsIterable(iterable)) {\n            throw new TypeError('bad iterable');\n          }\n          var it = ES.GetIterator(iterable);\n          var values = [], remaining = { count: 1 };\n          for (var index = 0; ; index++) {\n            var next = ES.IteratorNext(it);\n            if (next.done) {\n              break;\n            }\n            var nextPromise = C.resolve(next.value);\n            var resolveElement = _promiseAllResolver(\n              index, values, capability, remaining\n            );\n            remaining.count++;\n            nextPromise.then(resolveElement, capability.reject);\n          }\n          if ((--remaining.count) === 0) {\n            resolve(values); // call w/ this===undefined\n          }\n        } catch (e) {\n          reject(e);\n        }\n        return capability.promise;\n      },\n\n      race: function race(iterable) {\n        var C = this;\n        var capability = new PromiseCapability(C);\n        var resolve = capability.resolve;\n        var reject = capability.reject;\n        try {\n          if (!ES.IsIterable(iterable)) {\n            throw new TypeError('bad iterable');\n          }\n          var it = ES.GetIterator(iterable);\n          while (true) {\n            var next = ES.IteratorNext(it);\n            if (next.done) {\n              // If iterable has no items, resulting promise will never\n              // resolve; see:\n              // https://github.com/domenic/promises-unwrapping/issues/75\n              // https://bugs.ecmascript.org/show_bug.cgi?id=2515\n              break;\n            }\n            var nextPromise = C.resolve(next.value);\n            nextPromise.then(resolve, reject);\n          }\n        } catch (e) {\n          reject(e);\n        }\n        return capability.promise;\n      },\n\n      reject: function reject(reason) {\n        var C = this;\n        var capability = new PromiseCapability(C);\n        var rejectPromise = capability.reject;\n        rejectPromise(reason); // call with this===undefined\n        return capability.promise;\n      },\n\n      resolve: function resolve(v) {\n        var C = this;\n        if (ES.IsPromise(v)) {\n          var constructor = v._promiseConstructor;\n          if (constructor === C) { return v; }\n        }\n        var capability = new PromiseCapability(C);\n        var resolvePromise = capability.resolve;\n        resolvePromise(v); // call with this===undefined\n        return capability.promise;\n      }\n    });\n\n    defineProperties(Promise$prototype, {\n      'catch': function (onRejected) {\n        return this.then(void 0, onRejected);\n      },\n\n      then: function then(onFulfilled, onRejected) {\n        var promise = this;\n        if (!ES.IsPromise(promise)) { throw new TypeError('not a promise'); }\n        // this.constructor not this._promiseConstructor; see\n        // https://bugs.ecmascript.org/show_bug.cgi?id=2513\n        var C = this.constructor;\n        var capability = new PromiseCapability(C);\n        if (!ES.IsCallable(onRejected)) {\n          onRejected = function (e) { throw e; };\n        }\n        if (!ES.IsCallable(onFulfilled)) {\n          onFulfilled = function (x) { return x; };\n        }\n        var resolutionHandler = promiseResolutionHandler(promise, onFulfilled, onRejected);\n        var resolveReaction = { capability: capability, handler: resolutionHandler };\n        var rejectReaction = { capability: capability, handler: onRejected };\n        switch (promise._status) {\n          case 'unresolved':\n            promise._resolveReactions.push(resolveReaction);\n            promise._rejectReactions.push(rejectReaction);\n            break;\n          case 'has-resolution':\n            triggerPromiseReactions([resolveReaction], promise._result);\n            break;\n          case 'has-rejection':\n            triggerPromiseReactions([rejectReaction], promise._result);\n            break;\n          default:\n            throw new TypeError('unexpected');\n        }\n        return capability.promise;\n      }\n    });\n\n    return Promise;\n  }());\n\n  // Chrome's native Promise has extra methods that it shouldn't have. Let's remove them.\n  if (globals.Promise) {\n    delete globals.Promise.accept;\n    delete globals.Promise.defer;\n    delete globals.Promise.prototype.chain;\n  }\n\n  // export the Promise constructor.\n  defineProperties(globals, { Promise: PromiseShim });\n  // In Chrome 33 (and thereabouts) Promise is defined, but the\n  // implementation is buggy in a number of ways.  Let's check subclassing\n  // support to see if we have a buggy implementation.\n  var promiseSupportsSubclassing = supportsSubclassing(globals.Promise, function (S) {\n    return S.resolve(42) instanceof S;\n  });\n  var promiseIgnoresNonFunctionThenCallbacks = (function () {\n    try {\n      globals.Promise.reject(42).then(null, 5).then(null, noop);\n      return true;\n    } catch (ex) {\n      return false;\n    }\n  }());\n  var promiseRequiresObjectContext = (function () {\n    /*global Promise */\n    try { Promise.call(3, noop); } catch (e) { return true; }\n    return false;\n  }());\n  if (!promiseSupportsSubclassing || !promiseIgnoresNonFunctionThenCallbacks || !promiseRequiresObjectContext) {\n    /*globals Promise: true */\n    Promise = PromiseShim;\n    /*globals Promise: false */\n    defineProperty(globals, 'Promise', PromiseShim, true);\n  }\n\n  // Map and Set require a true ES5 environment\n  // Their fast path also requires that the environment preserve\n  // property insertion order, which is not guaranteed by the spec.\n  var testOrder = function (a) {\n    var b = Object.keys(a.reduce(function (o, k) {\n      o[k] = true;\n      return o;\n    }, {}));\n    return a.join(':') === b.join(':');\n  };\n  var preservesInsertionOrder = testOrder(['z', 'a', 'bb']);\n  // some engines (eg, Chrome) only preserve insertion order for string keys\n  var preservesNumericInsertionOrder = testOrder(['z', 1, 'a', '3', 2]);\n\n  if (supportsDescriptors) {\n\n    var fastkey = function fastkey(key) {\n      if (!preservesInsertionOrder) {\n        return null;\n      }\n      var type = typeof key;\n      if (type === 'string') {\n        return '$' + key;\n      } else if (type === 'number') {\n        // note that -0 will get coerced to \"0\" when used as a property key\n        if (!preservesNumericInsertionOrder) {\n          return 'n' + key;\n        }\n        return key;\n      }\n      return null;\n    };\n\n    var emptyObject = function emptyObject() {\n      // accomodate some older not-quite-ES5 browsers\n      return Object.create ? Object.create(null) : {};\n    };\n\n    var collectionShims = {\n      Map: (function () {\n\n        var empty = {};\n\n        function MapEntry(key, value) {\n          this.key = key;\n          this.value = value;\n          this.next = null;\n          this.prev = null;\n        }\n\n        MapEntry.prototype.isRemoved = function () {\n          return this.key === empty;\n        };\n\n        function MapIterator(map, kind) {\n          this.head = map._head;\n          this.i = this.head;\n          this.kind = kind;\n        }\n\n        MapIterator.prototype = {\n          next: function () {\n            var i = this.i, kind = this.kind, head = this.head, result;\n            if (typeof this.i === 'undefined') {\n              return { value: void 0, done: true };\n            }\n            while (i.isRemoved() && i !== head) {\n              // back up off of removed entries\n              i = i.prev;\n            }\n            // advance to next unreturned element.\n            while (i.next !== head) {\n              i = i.next;\n              if (!i.isRemoved()) {\n                if (kind === 'key') {\n                  result = i.key;\n                } else if (kind === 'value') {\n                  result = i.value;\n                } else {\n                  result = [i.key, i.value];\n                }\n                this.i = i;\n                return { value: result, done: false };\n              }\n            }\n            // once the iterator is done, it is done forever.\n            this.i = void 0;\n            return { value: void 0, done: true };\n          }\n        };\n        addIterator(MapIterator.prototype);\n\n        function Map(iterable) {\n          var map = this;\n          if (!ES.TypeIsObject(map)) {\n            throw new TypeError('Map does not accept arguments when called as a function');\n          }\n          map = emulateES6construct(map);\n          if (!map._es6map) {\n            throw new TypeError('bad map');\n          }\n\n          var head = new MapEntry(null, null);\n          // circular doubly-linked list.\n          head.next = head.prev = head;\n\n          defineProperties(map, {\n            _head: head,\n            _storage: emptyObject(),\n            _size: 0\n          });\n\n          // Optionally initialize map from iterable\n          if (typeof iterable !== 'undefined' && iterable !== null) {\n            var it = ES.GetIterator(iterable);\n            var adder = map.set;\n            if (!ES.IsCallable(adder)) { throw new TypeError('bad map'); }\n            while (true) {\n              var next = ES.IteratorNext(it);\n              if (next.done) { break; }\n              var nextItem = next.value;\n              if (!ES.TypeIsObject(nextItem)) {\n                throw new TypeError('expected iterable of pairs');\n              }\n              adder.call(map, nextItem[0], nextItem[1]);\n            }\n          }\n          return map;\n        }\n        var Map$prototype = Map.prototype;\n        defineProperties(Map, {\n          '@@create': function (obj) {\n            var constructor = this;\n            var prototype = constructor.prototype || Map$prototype;\n            obj = obj || create(prototype);\n            defineProperties(obj, { _es6map: true });\n            return obj;\n          }\n        });\n\n        Value.getter(Map.prototype, 'size', function () {\n          if (typeof this._size === 'undefined') {\n            throw new TypeError('size method called on incompatible Map');\n          }\n          return this._size;\n        });\n\n        defineProperties(Map.prototype, {\n          get: function (key) {\n            var fkey = fastkey(key);\n            if (fkey !== null) {\n              // fast O(1) path\n              var entry = this._storage[fkey];\n              if (entry) {\n                return entry.value;\n              } else {\n                return;\n              }\n            }\n            var head = this._head, i = head;\n            while ((i = i.next) !== head) {\n              if (ES.SameValueZero(i.key, key)) {\n                return i.value;\n              }\n            }\n          },\n\n          has: function (key) {\n            var fkey = fastkey(key);\n            if (fkey !== null) {\n              // fast O(1) path\n              return typeof this._storage[fkey] !== 'undefined';\n            }\n            var head = this._head, i = head;\n            while ((i = i.next) !== head) {\n              if (ES.SameValueZero(i.key, key)) {\n                return true;\n              }\n            }\n            return false;\n          },\n\n          set: function (key, value) {\n            var head = this._head, i = head, entry;\n            var fkey = fastkey(key);\n            if (fkey !== null) {\n              // fast O(1) path\n              if (typeof this._storage[fkey] !== 'undefined') {\n                this._storage[fkey].value = value;\n                return this;\n              } else {\n                entry = this._storage[fkey] = new MapEntry(key, value);\n                i = head.prev;\n                // fall through\n              }\n            }\n            while ((i = i.next) !== head) {\n              if (ES.SameValueZero(i.key, key)) {\n                i.value = value;\n                return this;\n              }\n            }\n            entry = entry || new MapEntry(key, value);\n            if (ES.SameValue(-0, key)) {\n              entry.key = +0; // coerce -0 to +0 in entry\n            }\n            entry.next = this._head;\n            entry.prev = this._head.prev;\n            entry.prev.next = entry;\n            entry.next.prev = entry;\n            this._size += 1;\n            return this;\n          },\n\n          'delete': function (key) {\n            var head = this._head, i = head;\n            var fkey = fastkey(key);\n            if (fkey !== null) {\n              // fast O(1) path\n              if (typeof this._storage[fkey] === 'undefined') {\n                return false;\n              }\n              i = this._storage[fkey].prev;\n              delete this._storage[fkey];\n              // fall through\n            }\n            while ((i = i.next) !== head) {\n              if (ES.SameValueZero(i.key, key)) {\n                i.key = i.value = empty;\n                i.prev.next = i.next;\n                i.next.prev = i.prev;\n                this._size -= 1;\n                return true;\n              }\n            }\n            return false;\n          },\n\n          clear: function () {\n            this._size = 0;\n            this._storage = emptyObject();\n            var head = this._head, i = head, p = i.next;\n            while ((i = p) !== head) {\n              i.key = i.value = empty;\n              p = i.next;\n              i.next = i.prev = head;\n            }\n            head.next = head.prev = head;\n          },\n\n          keys: function () {\n            return new MapIterator(this, 'key');\n          },\n\n          values: function () {\n            return new MapIterator(this, 'value');\n          },\n\n          entries: function () {\n            return new MapIterator(this, 'key+value');\n          },\n\n          forEach: function (callback) {\n            var context = arguments.length > 1 ? arguments[1] : null;\n            var it = this.entries();\n            for (var entry = it.next(); !entry.done; entry = it.next()) {\n              if (context) {\n                callback.call(context, entry.value[1], entry.value[0], this);\n              } else {\n                callback(entry.value[1], entry.value[0], this);\n              }\n            }\n          }\n        });\n        addIterator(Map.prototype, function () { return this.entries(); });\n\n        return Map;\n      }()),\n\n      Set: (function () {\n        // Creating a Map is expensive.  To speed up the common case of\n        // Sets containing only string or numeric keys, we use an object\n        // as backing storage and lazily create a full Map only when\n        // required.\n        var SetShim = function Set(iterable) {\n          var set = this;\n          if (!ES.TypeIsObject(set)) {\n            throw new TypeError('Set does not accept arguments when called as a function');\n          }\n          set = emulateES6construct(set);\n          if (!set._es6set) {\n            throw new TypeError('bad set');\n          }\n\n          defineProperties(set, {\n            '[[SetData]]': null,\n            _storage: emptyObject()\n          });\n\n          // Optionally initialize map from iterable\n          if (typeof iterable !== 'undefined' && iterable !== null) {\n            var it = ES.GetIterator(iterable);\n            var adder = set.add;\n            if (!ES.IsCallable(adder)) { throw new TypeError('bad set'); }\n            while (true) {\n              var next = ES.IteratorNext(it);\n              if (next.done) { break; }\n              var nextItem = next.value;\n              adder.call(set, nextItem);\n            }\n          }\n          return set;\n        };\n        var Set$prototype = SetShim.prototype;\n        defineProperties(SetShim, {\n          '@@create': function (obj) {\n            var constructor = this;\n            var prototype = constructor.prototype || Set$prototype;\n            obj = obj || create(prototype);\n            defineProperties(obj, { _es6set: true });\n            return obj;\n          }\n        });\n\n        // Switch from the object backing storage to a full Map.\n        var ensureMap = function ensureMap(set) {\n          if (!set['[[SetData]]']) {\n            var m = set['[[SetData]]'] = new collectionShims.Map();\n            Object.keys(set._storage).forEach(function (k) {\n              // fast check for leading '$'\n              if (k.charCodeAt(0) === 36) {\n                k = k.slice(1);\n              } else if (k.charAt(0) === 'n') {\n                k = +k.slice(1);\n              } else {\n                k = +k;\n              }\n              m.set(k, k);\n            });\n            set._storage = null; // free old backing storage\n          }\n        };\n\n        Value.getter(SetShim.prototype, 'size', function () {\n          if (typeof this._storage === 'undefined') {\n            // https://github.com/paulmillr/es6-shim/issues/176\n            throw new TypeError('size method called on incompatible Set');\n          }\n          ensureMap(this);\n          return this['[[SetData]]'].size;\n        });\n\n        defineProperties(SetShim.prototype, {\n          has: function (key) {\n            var fkey;\n            if (this._storage && (fkey = fastkey(key)) !== null) {\n              return !!this._storage[fkey];\n            }\n            ensureMap(this);\n            return this['[[SetData]]'].has(key);\n          },\n\n          add: function (key) {\n            var fkey;\n            if (this._storage && (fkey = fastkey(key)) !== null) {\n              this._storage[fkey] = true;\n              return this;\n            }\n            ensureMap(this);\n            this['[[SetData]]'].set(key, key);\n            return this;\n          },\n\n          'delete': function (key) {\n            var fkey;\n            if (this._storage && (fkey = fastkey(key)) !== null) {\n              var hasFKey = _hasOwnProperty(this._storage, fkey);\n              return (delete this._storage[fkey]) && hasFKey;\n            }\n            ensureMap(this);\n            return this['[[SetData]]']['delete'](key);\n          },\n\n          clear: function () {\n            if (this._storage) {\n              this._storage = emptyObject();\n            } else {\n              this['[[SetData]]'].clear();\n            }\n          },\n\n          values: function () {\n            ensureMap(this);\n            return this['[[SetData]]'].values();\n          },\n\n          entries: function () {\n            ensureMap(this);\n            return this['[[SetData]]'].entries();\n          },\n\n          forEach: function (callback) {\n            var context = arguments.length > 1 ? arguments[1] : null;\n            var entireSet = this;\n            ensureMap(entireSet);\n            this['[[SetData]]'].forEach(function (value, key) {\n              if (context) {\n                callback.call(context, key, key, entireSet);\n              } else {\n                callback(key, key, entireSet);\n              }\n            });\n          }\n        });\n        defineProperty(SetShim, 'keys', SetShim.values, true);\n        addIterator(SetShim.prototype, function () { return this.values(); });\n\n        return SetShim;\n      }())\n    };\n    defineProperties(globals, collectionShims);\n\n    if (globals.Map || globals.Set) {\n      /*\n        - In Firefox < 23, Map#size is a function.\n        - In all current Firefox, Set#entries/keys/values & Map#clear do not exist\n        - https://bugzilla.mozilla.org/show_bug.cgi?id=869996\n        - In Firefox 24, Map and Set do not implement forEach\n        - In Firefox 25 at least, Map and Set are callable without \"new\"\n      */\n      if (\n        typeof globals.Map.prototype.clear !== 'function' ||\n        new globals.Set().size !== 0 ||\n        new globals.Map().size !== 0 ||\n        typeof globals.Map.prototype.keys !== 'function' ||\n        typeof globals.Set.prototype.keys !== 'function' ||\n        typeof globals.Map.prototype.forEach !== 'function' ||\n        typeof globals.Set.prototype.forEach !== 'function' ||\n        isCallableWithoutNew(globals.Map) ||\n        isCallableWithoutNew(globals.Set) ||\n        !supportsSubclassing(globals.Map, function (M) {\n          var m = new M([]);\n          // Firefox 32 is ok with the instantiating the subclass but will\n          // throw when the map is used.\n          m.set(42, 42);\n          return m instanceof M;\n        })\n      ) {\n        globals.Map = collectionShims.Map;\n        globals.Set = collectionShims.Set;\n      }\n    }\n    if (globals.Set.prototype.keys !== globals.Set.prototype.values) {\n      defineProperty(globals.Set.prototype, 'keys', globals.Set.prototype.values, true);\n    }\n    // Shim incomplete iterator implementations.\n    addIterator(Object.getPrototypeOf((new globals.Map()).keys()));\n    addIterator(Object.getPrototypeOf((new globals.Set()).keys()));\n  }\n\n  return globals;\n}));\n","(function (g, factory) {\n    /* globals module:0, define:0 */\n\n    'use strict';\n\n    /* istanbul ignore next */\n    if (typeof exports === 'object') {\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        define('ceb', [], factory);\n    } else {\n        g.ceb = factory();\n    }\n\n}(this, function () {\n\n    'use strict';\n\n    var testing = {};\n\n    /* TOOLS */\n\n    function emptyFn() {\n        return function () {};\n    }\n    testing.emptyFn = emptyFn;\n\n    function listValues(o) {\n        return Object.getOwnPropertyNames(o).map(function (propName) {\n            return o[propName];\n        });\n    }\n    testing.listValues = listValues;\n\n    // transform property notation to attribute notation\n    function fromCamelCaseToHyphenCase(value) {\n        return value.split(/(?=[A-Z])/).map(function (part) {\n            return part.charAt(0).toLowerCase() + part.slice(1);\n        }).join('-');\n    }\n    testing.fromCamelCaseToHyphenCase = fromCamelCaseToHyphenCase;\n\n    function compareLevels(a, b) {\n        return a.level > b.level;\n    }\n    testing.compareLevels = compareLevels;\n\n    function applyAttributeValue(el, attName, value, isBoolean) {\n        if (isBoolean) {\n            if (value && !el.hasAttribute(attName)) {\n                el.setAttribute(attName, '');\n            } else if (!value && el.hasAttribute(attName)) {\n                el.removeAttribute(attName);\n            }\n        } else {\n            if ((value === null || value === undefined) && el.hasAttribute(attName)) {\n                el.removeAttribute(attName);\n            } else if ((value !== null && value !== undefined) && el.getAttribute(attName) !== value) {\n                el.setAttribute(attName, value);\n            }\n        }\n    }\n    testing.applyAttributeValue = applyAttributeValue;\n\n    function accessorFactory(wrappers, wrapped) {\n        var stack = wrappers.sort(compareLevels);\n        return function () {\n            var el = this;\n            return stack.reduce(function (previous, current) {\n                return current.bind(el, previous, el);\n            }, wrapped.bind(el, el)).apply(el, arguments);\n        };\n    }\n    testing.accessorFactory = accessorFactory;\n\n    function attributeAccessorSetFactory(attName, setter, isBoolean) {\n        return function (el, value) {\n            var attValue = value;\n            if (setter) {\n                attValue = setter.call(el, el, value);\n            }\n            applyAttributeValue(el, attName, attValue, isBoolean);\n        };\n    }\n    testing.attributeAccessorSetFactory = attributeAccessorSetFactory;\n\n    function attributeAccessorGetFactory(attName, getter, isBoolean) {\n        return function (el) {\n            var value = isBoolean ? el.hasAttribute(attName) : el.getAttribute(attName);\n            if (getter) {\n                value = getter.call(el, el, value);\n            }\n            return value;\n        };\n    }\n    testing.attributeAccessorGetFactory = attributeAccessorGetFactory;\n\n    function methodFactory(wrappers, wrapped) {\n        var stack = wrappers.sort(compareLevels);\n        return function () {\n            var el = this;\n            return stack.reduce(function (previous, current) {\n                return current.bind(el, function next(args) {\n                    return previous.apply(el, Array.prototype.slice.call(args).slice(2, args.length));\n                }, el);\n            }, wrapped.bind(el, el)).apply(el, arguments);\n        };\n    }\n    testing.methodFactory = methodFactory;\n\n    /* BUILD LIFE CYCLE */\n\n    function sanitizeStructure(struct) {\n        struct.prototype = struct.prototype || Object.create(HTMLElement.prototype);\n        struct.features = struct.features || [];\n        struct.interceptors = struct.interceptors || [];\n        struct.wrappers = struct.wrappers || [];\n        struct.properties = struct.properties || {};\n        struct.methods = Object.assign({\n            createdCallback: emptyFn(),\n            attachedCallback: emptyFn(),\n            detachedCallback: emptyFn(),\n            attributeChangedCallback: emptyFn()\n        }, struct.methods);\n        return struct;\n    }\n    testing.sanitizeStructure = sanitizeStructure;\n\n    function setupFeatures(struct) {\n        var b = builder(struct.tagName, {\n            struct: struct,\n            registered: true\n        });\n        struct.features.sort(compareLevels).forEach(function (feature) {\n            if (feature.fn && feature.fn.setup) {\n                feature.fn.setup(struct, b, feature.options);\n            }\n        });\n    }\n    testing.setupFeatures = setupFeatures;\n\n    function createAttributesHash(struct) {\n        return listValues(struct.properties).filter(function (property) {\n            return property.attName;\n        }).reduce(function (previous, current) {\n            previous[current.attName] = current;\n            return previous;\n        }, {});\n    }\n    testing.createAttributesHash = createAttributesHash;\n\n    function createDefinedPropertiesHash(struct) {\n        return listValues(struct.properties).map(function (property) {\n            // default parameters\n            var definedProperty = {\n                configurable: false,\n                enumerable: true\n            };\n\n            if (property.attribute) {\n                // handle properties linked to an attribute\n                property.set = attributeAccessorSetFactory(property.attName, property.setter, !!property.attribute.boolean);\n                property.get = attributeAccessorGetFactory(property.attName, property.getter, !!property.attribute.boolean);\n            } else if (property.hasOwnProperty('value') && property.hasOwnProperty('writable') && !property.writable) {\n                // handle constants\n                definedProperty.value = property.value;\n                definedProperty.writable = false;\n            } else if (!property.set && !property.get) {\n                definedProperty.writable = true;\n            }\n\n            if (!definedProperty.hasOwnProperty('writable')) {\n                // handle setter and getter\n                var interceptors = struct.interceptors[property.propName] || {};\n                if (property.set) {\n                    var setStack = interceptors.set || [];\n                    definedProperty.set = accessorFactory(setStack, property.set);\n                }\n                if (property.get) {\n                    var getStack = interceptors.get || [];\n                    definedProperty.get = accessorFactory(getStack, property.get);\n                }\n            }\n\n            return Object.assign(property, {\n                property: definedProperty\n            });\n        }).reduce(function (previous, current) {\n            previous[current.propName] = current.property;\n            return previous;\n        }, {});\n    }\n    testing.createDefinedPropertiesHash = createDefinedPropertiesHash;\n\n    function createMethodsHash(struct) {\n        return Object.getOwnPropertyNames(struct.methods).map(function (methName) {\n            var stack = struct.wrappers[methName] || [];\n            var fn = struct.methods[methName];\n            return {\n                methName: methName,\n                fn: methodFactory(stack, fn)\n            };\n        }).reduce(function (previous, current) {\n            previous[current.methName] = current.fn;\n            return previous;\n        }, {});\n    }\n    testing.createMethodsHash = createMethodsHash;\n\n    /* BUILD */\n\n    var build = function build(struct) {\n        sanitizeStructure(struct);\n        setupFeatures(struct);\n\n        struct.definedProperties = createDefinedPropertiesHash(struct);\n        struct.attributes = createAttributesHash(struct);\n        struct.methods = createMethodsHash(struct);\n\n        Object.defineProperties(struct.prototype, struct.definedProperties);\n        Object.assign(struct.prototype, struct.methods);\n\n        return document.registerElement(struct.tagName, struct);\n    };\n    testing.build = build;\n\n    /* FEATURES */\n\n    var builtInFeatures = {};\n    testing.builtInFeatures = builtInFeatures;\n\n    builtInFeatures.delegate = emptyFn();\n    builtInFeatures.delegate.delegableSetAccessorInterceptor = function (property, next, el, value) {\n        next(value);\n        var target = el.querySelector(property.delegate.target);\n        /* istanbul ignore else  */\n        if (target) {\n            var targetPropName = property.delegate.property;\n            var targetAttName = property.delegate.attribute;\n            if (!targetPropName && !targetAttName) {\n                targetPropName = property.propName;\n                targetAttName = property.attName;\n            }\n            var isBoolean = property.attribute && !!property.attribute.boolean;\n            if (property.delegate.hasOwnProperty('boolean')) {\n                isBoolean = property.delegate.boolean;\n            }\n            if (targetAttName) {\n                applyAttributeValue(target, targetAttName, value, isBoolean);\n            } else {\n                target[targetPropName] = value;\n            }\n        }\n    };\n    builtInFeatures.delegate.delegableGetAccessorInterceptor = function (property, next, el, value) {\n        var result = next(value);\n        var target = el.querySelector(property.delegate.target);\n        /* istanbul ignore else  */\n        if (target) {\n            var targetPropName = property.delegate.property;\n            var targetAttName = property.delegate.attribute;\n            if (!targetPropName && !targetAttName) {\n                targetPropName = property.propName;\n                targetAttName = property.attName;\n            }\n            var isBoolean = property.attribute && !!property.attribute.boolean;\n            if (property.delegate.hasOwnProperty('boolean')) {\n                isBoolean = property.delegate.boolean;\n            }\n            if (targetAttName) {\n                result = isBoolean ? target.hasAttribute(targetAttName) : target.getAttribute(targetAttName);\n            } else {\n                result = target[targetPropName];\n            }\n        }\n        return result;\n    };\n    builtInFeatures.delegate.setup = function (struct, builder) {\n        var delegableSetAccessorInterceptor = builtInFeatures.delegate.delegableSetAccessorInterceptor;\n        var delegableGetAccessorInterceptor = builtInFeatures.delegate.delegableGetAccessorInterceptor;\n        // keep only properties configured for delegation\n        listValues(struct.properties).filter(function (property) {\n            return property.delegate;\n        }).forEach(function (property) {\n            // intercept the setter\n            if (!property.attName) {\n                property.set = property.set || emptyFn();\n                property.get = property.get || emptyFn();\n            }\n            builder.intercept(\n                property.propName,\n                delegableSetAccessorInterceptor.bind(builtInFeatures.delegate, property),\n                delegableGetAccessorInterceptor.bind(builtInFeatures.delegate, property)\n            );\n        });\n    };\n\n    builtInFeatures.valueInitializer = emptyFn();\n    builtInFeatures.valueInitializer.createdCallbackWrapper = function (struct, next, el) {\n        next(arguments);\n        listValues(struct.properties).forEach(function (property) {\n            if (property.attName) {\n                if (el.hasAttribute(property.attName)) {\n                    el[property.propName] = property.attribute.boolean ? true : el.getAttribute(property.attName);\n                } else if (property.hasOwnProperty('value')) {\n                    applyAttributeValue(el, property.attName, property.value, property.attribute.boolean);\n                }\n            } else if (property.hasOwnProperty('value') && property.writable) {\n                el[property.propName] = property.value;\n            }\n        });\n    };\n    builtInFeatures.valueInitializer.attributeChangedCallbackWrapper = function (struct, next, el, attName, oldVal, newVal) {\n        var property = struct.attributes[attName];\n        if (property) {\n            var value = newVal;\n            if (property.attribute.boolean) {\n                value = typeof newVal === 'string' ? true : false;\n            }\n            el[property.propName] = value;\n        }\n        next(arguments);\n    };\n    builtInFeatures.valueInitializer.setup = function (struct, builder) {\n        var createdCallbackWrapper = builtInFeatures.valueInitializer.createdCallbackWrapper;\n        var attributeChangedCallbackWrapper = builtInFeatures.valueInitializer.attributeChangedCallbackWrapper;\n        builder.wrap('createdCallback', createdCallbackWrapper.bind(builtInFeatures.valueInitializer, struct));\n        builder.wrap('attributeChangedCallback', attributeChangedCallbackWrapper.bind(builtInFeatures.valueInitializer, struct));\n    };\n\n    /* BUILDER */\n\n    function baseStructFactory() {\n        return {\n            properties: {},\n            methods: {},\n            wrappers: [],\n            interceptors: [],\n            features: [{\n                fn: builtInFeatures.delegate,\n                level: -2\n            }, {\n                fn: builtInFeatures.valueInitializer,\n                level: -1\n            }]\n        };\n    }\n    testing.baseStructFactory = baseStructFactory;\n\n    function sanitizeProperty(property) {\n        if (property.attribute) {\n            property.attName = property.attribute.name || fromCamelCaseToHyphenCase(property.propName);\n        }\n        property.writable = property.hasOwnProperty('writable') ? property.writable : true;\n        return property;\n    }\n    testing.sanitizeProperty = sanitizeProperty;\n\n    var builder = function builder(tagName, params) {\n        var struct = params && params.struct ? sanitizeStructure(params.struct) : baseStructFactory();\n        struct.tagName = tagName;\n        var registered = params && params.hasOwnProperty('registered') ? params.registered : false;\n        var api = {};\n        // WRAPPER\n        api.wrap = function (methName, fn, level) {\n            if (!struct.wrappers[methName]) {\n                struct.wrappers[methName] = [];\n            }\n            fn.level = isNaN(level) ? 0 : level;\n            struct.wrappers[methName].push(fn);\n            return api;\n        };\n        api.intercept = function (propName, setFn, getFn, level) {\n            if (!struct.interceptors[propName]) {\n                struct.interceptors[propName] = {\n                    set: [],\n                    get: []\n                };\n            }\n            if (setFn) {\n                setFn.level = isNaN(level) ? 0 : level;\n                struct.interceptors[propName].set.push(setFn);\n            }\n            if (getFn) {\n                getFn.level = isNaN(level) ? 0 : level;\n                struct.interceptors[propName].get.push(getFn);\n            }\n            return api;\n        };\n        // INTEGRATION\n        api['extends'] = function (anExtend) {\n            struct['extends'] = anExtend;\n            return api;\n        };\n        api.prototype = function (aProto) {\n            struct.prototype = aProto;\n            return api;\n        };\n        // FELDS\n        api.properties = function (someProperties) {\n\n            var sanitizedProperties = Object.getOwnPropertyNames(someProperties).map(function (propName) {\n                return Object.assign(someProperties[propName], {\n                    propName: propName\n                });\n            }).map(sanitizeProperty).reduce(function (previous, current) {\n                previous[current.propName] = current;\n                return previous;\n            }, {});\n\n            Object.assign(struct.properties, sanitizedProperties);\n\n            return api;\n        };\n        api.methods = function (someMethods) {\n            Object.assign(struct.methods, someMethods);\n            return api;\n        };\n        // FEATURES\n        api.feature = function (fn, options, level) {\n            struct.features.push({\n                fn: fn,\n                options: options,\n                level: isNaN(level) ? 0 : level\n            });\n            return api;\n        };\n        api.register = function () {\n            if (!registered) {\n                registered = true;\n                return build(struct);\n            }\n        };\n        api.get = function () {\n            return struct;\n        };\n        return api;\n    };\n    testing.builder = builder;\n\n    function factory(params) {\n        var api = {};\n        api.name = function (tagName) {\n            return builder(tagName, params);\n        };\n        return api;\n    }\n    factory._testing = testing;\n\n    return factory;\n}));\n"]}