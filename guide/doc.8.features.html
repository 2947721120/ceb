<!DOCTYPE html> <html> <head> <meta charset=UTF-8> <title>ceb's guide: features - just a builder, natively scalable and designed for FRP</title> <meta name=description content="Custom Elements Builder (ceb) is just a builder, natively scalable and designed for FRP."> <meta name="keywords " content=Web,Components,Custom,Element,Elements,DOM,W3C,FRP,functional,reactive,template,builder> <meta name=language content=en> <meta name=author content="Custom Elements Builder"> <meta name=viewport content="width=device-width"> <link rel="shortcut icon" href=../6df2b309.favicon.ico> <link rel=stylesheet href=../styles/a95abb3e.vendor.css> <link rel=stylesheet href=../styles/b1451e81.main.css>  <body lang=en> <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--> <nav class="navbar navbar-default"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href="../">custom-element-builder</a> </div> <div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1> <ul class="nav navbar-nav"> <li> <a href="../">Home <span class=sr-only>(current)</span></a> </li> <li> <a href=../install.html>Install</a> </li> <li class=active> <a href="./">Guide</a> </li> <li> <a href=../features>Features</a> </li> </ul> </div> </div> </nav> <main class=container-fluid> <ul class="nav nav-pills"> <li> <a href=index.html> usage </a> </li> <li> <a href=doc.2.inheritance.html> inheritance </a> </li> <li> <a href=doc.3.properties.html> properties </a> </li> <li> <a href=doc.4.interceptors.html> interceptors </a> </li> <li> <a href=doc.5.methods.html> methods </a> </li> <li> <a href=doc.6.wrappers.html> wrappers </a> </li> <li> <a href=doc.7.listeners.html> listeners </a> </li> <li class=active> <a href=doc.8.features.html> features </a> </li> </ul> <br> <section> <div class=row id=section-1> <div class=col-md-4> <h2 id=features>Features</h2> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre><span class=hljs-keyword>var</span> builder = ceb().name(<span class=hljs-string>'featured-tag'</span>);</pre></div></div> </div> </div> <div class=row id=section-2> <div class=col-md-4> <h2 id=the-needs>The needs</h2> </div> <div class=col-md-8> </div> </div> <div class=row id=section-3> <div class=col-md-4> <p>Custom Elements are, at the end, objects. So, they can inherit from another element (i.e. <a href=doc.2.inheritance.html>Extends and prototype</a>), This relation is vertical and one element can only inherit from another one.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-4> <div class=col-md-4> <p>Due to the dynamic part of JavaScript, the <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign>mixin way</a> can be used to share functionalities. This new relation is horizontal and allows one object to be enhanced with others. However, this merging process overrides the properties and methods of the initial object.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-5> <div class=col-md-4> <p>The <em>interceptors</em> and <em>wrappers</em> provided by <strong>ceb</strong> resolve the side effect of overriding. They act as an horizontal relations keeping alive the originals properties and methods.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-6> <div class=col-md-4> <p>The features are containers of functionalities. They provide to custom elements where they are applied their functionalities.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-7> <div class=col-md-4> <h2 id=the-response>The response</h2> </div> <div class=col-md-8> </div> </div> <div class=row id=section-8> <div class=col-md-4> <p>A feature is a simple function taking only one argument: the element instance. This function is, for a custom element, the public API of the feature.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-9> <div class=col-md-4> <p>However, a function <em>setup</em> can be attached to the feature’s function. It will be called by <strong>ceb</strong> before the full process of the structure. That’s mean the function <em>setup</em> can have access to the whole structure of future custom element. Moreover, a builder is given to this function, allowing feature to adds stuff to the structure.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-10> <div class=col-md-4> <p>The following feature will handle a placeholder. The placeholder will be displayed according to the attributes placeholder-value and placeholder-target. By default the target is the element instance.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-11> <div class=col-md-4> <p>There is no public API provided by the feature’s function.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre><span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>placeholderFeature</span><span class=hljs-params>()</span> </span>{}</pre></div></div> </div> </div> <div class=row id=section-12> <div class=col-md-4> <p>The setup function is called with three arguments</p> <ul> <li>struct: the current structure</li> <li>featureBuilder: a builder based on the current structure</li> <li>options: the options given when the feature has been added to the structure</li> </ul> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>placeholderFeature.setup = <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-params>(struct, featureBuilder, options)</span> </span>{</pre></div></div> </div> </div> <div class=row id=section-13> <div class=col-md-4> <p>Check from the options if the native placeholder should be used.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-keyword>var</span> native = options.hasOwnProperty(<span class=hljs-string>'native'</span>) ? options.native : <span class=hljs-literal>false</span>;</pre></div></div> </div> </div> <div class=row id=section-14> <div class=col-md-4> <p>This function is an interceptor. The goal of this interceptor is to update the UI according to the value set. That’s means, just after the write of the value, the UI must be updated.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>writeInterceptor</span><span class=hljs-params>(next, el, value)</span> </span>{</pre></div></div> </div> </div> <div class=row id=section-15> <div class=col-md-4> <p>call the original set accessor in order to update the DOM’s attributes.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>        <span class=hljs-keyword>var</span> result = next(value);</pre></div></div> </div> </div> <div class=row id=section-16> <div class=col-md-4> <p>There, the DOM attribute has been written, so <code>el.placeholderValue === value</code> or <code>el.placeholderTarget === value</code></p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-17> <div class=col-md-4> <p>Detect the target according to the value of placeholderTarget.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>        <span class=hljs-keyword>var</span> target = el.placeholderTarget ? el.querySelector(el.placeholderTarget) : el;

        <span class=hljs-keyword>if</span> (native) {</pre></div></div> </div> </div> <div class=row id=section-18> <div class=col-md-4> <p>The previous target is cleaned, because the target can change at any time.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>            <span class=hljs-keyword>if</span> (el.__placeholderTarget &amp;&amp; el.__placeholderTarget.hasAttribute(<span class=hljs-string>'placeholder'</span>)) {
                el.__placeholderTarget.removeAttribute(<span class=hljs-string>'placeholder'</span>);
                <span class=hljs-keyword>delete</span> el.__placeholderTarget;
            }</pre></div></div> </div> </div> <div class=row id=section-19> <div class=col-md-4> <p>Display the placeholder using the native attribute, and keep a reference of the DOM node which will be cleaned.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>            <span class=hljs-keyword>if</span> (el.placeholderValue) {
                target.setAttribute(<span class=hljs-string>'placeholder'</span>, el.placeholderValue);
                el.__placeholderTarget = target;
            }

        } <span class=hljs-keyword>else</span> {</pre></div></div> </div> </div> <div class=row id=section-20> <div class=col-md-4> <p>The previous jquery’s plugin is destroyed, because the target can change at any time.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>            <span class=hljs-keyword>if</span> (el.__$placeholderTarget) {
                el.__$placeholderTarget.placeholder(<span class=hljs-string>'destroy'</span>);
                <span class=hljs-keyword>delete</span> el.__$placeholderTarget;
            }</pre></div></div> </div> </div> <div class=row id=section-21> <div class=col-md-4> <p>Display the placeholder using a dedicated jquery plugin, and keep a reference of jquery instance in order to destroy it.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>            <span class=hljs-keyword>if</span> (el.placeholderValue) {
                el.__$placeholderTarget = <span class=hljs-built_in>window</span>.$(target).placeholder({
                    value: el.placeholderValue
                });
            }

        }

        <span class=hljs-keyword>return</span> result;
    }</pre></div></div> </div> </div> <div class=row id=section-22> <div class=col-md-4> <p>Defined the two properties of the features.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    featureBuilder.properties({
        placeholderValue: {
            attribute: <span class=hljs-literal>true</span>
        },
        placeholderTarget: {
            attribute: <span class=hljs-literal>true</span>
        }
    });</pre></div></div> </div> </div> <div class=row id=section-23> <div class=col-md-4> <p>Intercept the property placeholderValue and placeholderTarget to update the UI on the fly.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    featureBuilder.intercept(<span class=hljs-string>'placeholderValue'</span>, writeInterceptor).intercept(<span class=hljs-string>'placeholderTarget'</span>, writeInterceptor);</pre></div></div> </div> </div> <div class=row id=section-24> <div class=col-md-4> <p>When the element is detached, the jquery plugin must be destroy to avoid memory leak.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    featureBuilder.wrap(<span class=hljs-string>'detachedCallback'</span>, <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-params>(next, el)</span> </span>{
        <span class=hljs-keyword>if</span> (el.__$placeholderTarget) {
            el.__$placeholderTarget.placeholder(<span class=hljs-string>'destroy'</span>);
            <span class=hljs-keyword>delete</span> el.__$placeholderTarget;
        }
        next(<span class=hljs-built_in>arguments</span>);
    });</pre></div></div> </div> </div> <div class=row id=section-25> <div class=col-md-4> <p>So, when the element is attached, the jquery plugin must be created if the element has just been cloned.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    featureBuilder.wrap(<span class=hljs-string>'attachedCallback'</span>, <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-params>(next, el)</span> </span>{
        next(<span class=hljs-built_in>arguments</span>);
        <span class=hljs-keyword>var</span> target = el.placeholderTarget ? el.querySelector(el.placeholderTarget) : el;
        <span class=hljs-keyword>if</span> (!native &amp;&amp; el.placeholderValue) {
            el.__$placeholderTarget = <span class=hljs-built_in>window</span>.$(target).placeholder({
                value: el.placeholderValue
            });
        }
    });

};</pre></div></div> </div> </div> <div class=row id=section-26> <div class=col-md-4> <p>The builder’s method feature adds the given feature to the structure.</p> <blockquote> <p>@param feature (function) the feature’s funtion @param options (Object) a hash of options</p> </blockquote> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>builder.feature(placeholderFeature, {
    native: <span class=hljs-literal>true</span>
});</pre></div></div> </div> </div> </section> </main> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-20179310-4', '/custom-elements-builder');
  ga('send', 'pageview');</script>  