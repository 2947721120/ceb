<!DOCTYPE html> <html> <head> <meta charset=UTF-8> <title>ceb's guide: interceptors - just a builder, natively scalable and designed for FRP</title> <meta name=description content="Custom Elements Builder (ceb) is just a builder, natively scalable and designed for FRP."> <meta name="keywords " content=Web,Components,Custom,Element,Elements,DOM,W3C,FRP,functional,reactive,template,builder> <meta name=language content=en> <meta name=author content="Custom Elements Builder"> <meta name=viewport content="width=device-width"> <link rel=apple-touch-icon sizes=57x57 href=../images/c48ee12a.apple-touch-icon-57x57.png> <link rel=apple-touch-icon sizes=60x60 href=../images/cb370edc.apple-touch-icon-60x60.png> <link rel=apple-touch-icon sizes=72x72 href=../images/2ea33308.apple-touch-icon-72x72.png> <link rel=apple-touch-icon sizes=76x76 href=../images/45ee9abb.apple-touch-icon-76x76.png> <link rel=apple-touch-icon sizes=114x114 href=../images/5f1dc245.apple-touch-icon-114x114.png> <link rel=apple-touch-icon sizes=120x120 href=../images/63dc56d1.apple-touch-icon-120x120.png> <link rel=apple-touch-icon sizes=144x144 href=../images/bbf60e37.apple-touch-icon-144x144.png> <link rel=apple-touch-icon sizes=152x152 href=../images/d0ed3fb6.apple-touch-icon-152x152.png> <link rel=apple-touch-icon sizes=180x180 href=../images/b8016488.apple-touch-icon-180x180.png> <link rel=icon type=image/png href=../images/4d3b8148.favicon-32x32.png sizes=32x32> <link rel=icon type=image/png href=../images/1ab9e421.favicon-194x194.png sizes=194x194> <link rel=icon type=image/png href=../images/18e40078.favicon-96x96.png sizes=96x96> <link rel=icon type=image/png href=../images/792d68e8.android-chrome-192x192.png sizes=192x192> <link rel=icon type=image/png href=../images/cb4e7ecd.favicon-16x16.png sizes=16x16> <link rel=manifest href=../images/manifest.json> <link rel="shortcut icon" href=../images/favicon.ico> <meta name=msapplication-TileColor content=#428bca> <meta name=msapplication-TileImage content=../images/8fb6b60d.mstile-144x144.png> <meta name=msapplication-config content=../images/browserconfig.xml> <meta name=theme-color content=#ffffff> <link rel=stylesheet href=../styles/a95abb3e.vendor.css> <link rel=stylesheet href=../styles/b1451e81.main.css>  <body lang=en> <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--> <nav class="navbar navbar-default"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href="../"><code>&ltceb/&gt;</code></a> </div> <div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1> <ul class="nav navbar-nav"> <li> <a href="../">Home <span class=sr-only>(current)</span></a> </li> <li> <a href=../overview/just_a_builder.html>Overview</a> </li> <li> <a href=../install.html>Install</a> </li> <li class=active> <a href="./">Guide</a> </li> <li> <a href=../features>Features</a> </li> </ul> </div> </div> </nav> <main class=container-fluid> <ul class="nav nav-pills"> <li> <a href=index.html> usage </a> </li> <li> <a href=2.inheritance.html> inheritance </a> </li> <li> <a href=3.properties.html> properties </a> </li> <li class=active> <a href=4.interceptors.html> interceptors </a> </li> <li> <a href=5.methods.html> methods </a> </li> <li> <a href=6.wrappers.html> wrappers </a> </li> <li> <a href=7.listeners.html> listeners </a> </li> <li> <a href=8.features.html> features </a> </li> </ul> <br> <section> <div class=row id=section-1> <div class=col-md-4> <h2 id=interceptors>Interceptors</h2> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre><span class=hljs-keyword>var</span> builder = ceb().name(<span class=hljs-string>'properties-intercepted-tag'</span>);</pre></div></div> </div> </div> <div class=row id=section-2> <div class=col-md-4> <p>Properties having accessors or properties linked to attributes can have interceptors. Interceptors can intercept write and read accesses of properties. They wrap the accessors, by this way they can process logic around the effective access.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-3> <div class=col-md-4> <p>Interceptors work only against structure’s properties.</p> <p>The property <code>propIntercepted</code> has accesors, so accesses can be intercetped.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>builder.properties({
    propIntercepted: {
        set: <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-params>(el, propName, value)</span> </span>{
            el._propIntercepted = value;
        },
        get: <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-params>(el)</span> </span>{
            <span class=hljs-keyword>return</span> el._propIntercepted;
        }
    }
});</pre></div></div> </div> </div> <div class=row id=section-4> <div class=col-md-4> <h3 id=write-callback>Write callback</h3> </div> <div class=col-md-8> </div> </div> <div class=row id=section-5> <div class=col-md-4> <p>The function <code>interceptWrite</code> is a write access callback.</p> <blockquote> <p>@param next (function) will call the next stacked callback @param el (HTMLElement) the current element @param propName (string) the property name @param value (*) the value of the previous stacked callback</p> </blockquote> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre><span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>interceptWrite</span><span class=hljs-params>(next, el, propName, value)</span> </span>{</pre></div></div> </div> </div> <div class=row id=section-6> <div class=col-md-4> <p>There, logic can be done with the element instance and the given value.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-keyword>var</span> processedValue = (value || <span class=hljs-string>''</span>).toUpperCase();</pre></div></div> </div> </div> <div class=row id=section-7> <div class=col-md-4> <p>The function <code>next</code> will call the next stacked callback. Its argument will be the value of the next stacked callback.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-keyword>var</span> result = next(processedValue);</pre></div></div> </div> </div> <div class=row id=section-8> <div class=col-md-4> <p>There, logic can be done with the element instance and the returned value. Usually accessors set and so interceptors dedicated for writing don’t return values.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-built_in>console</span>.log(el.tagName, <span class=hljs-string>'a property has been written'</span>);</pre></div></div> </div> </div> <div class=row id=section-9> <div class=col-md-4> <p><code>result</code> will be the returned value of the function <code>next</code> into the previous stacked callback.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-keyword>return</span> result;
}</pre></div></div> </div> </div> <div class=row id=section-10> <div class=col-md-4> <h3 id=read-callback>Read callback</h3> </div> <div class=col-md-8> </div> </div> <div class=row id=section-11> <div class=col-md-4> <p>The function <code>interceptRead</code> is a read access callback.</p> <blockquote> <p>@param next (function) will call the next stacked callback @param el (HTMLElement) the current element @param propName (string) the property name @param value (*) the value of the previous stacked callback</p> </blockquote> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre><span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>interceptRead</span><span class=hljs-params>(next, el, propName, value)</span> </span>{</pre></div></div> </div> </div> <div class=row id=section-12> <div class=col-md-4> <p>Usually accessors get and so interceptors dedicated for reading don’t have given value.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-13> <div class=col-md-4> <p>There, logic can be done with the element instance and the given value.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-built_in>console</span>.log(el.tagName, <span class=hljs-string>'a property is going to be read'</span>);</pre></div></div> </div> </div> <div class=row id=section-14> <div class=col-md-4> <p>The function <code>next</code> will call the next stacked callback. Its argument will be the value of the next stacked callback.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-keyword>var</span> result = next(value);</pre></div></div> </div> </div> <div class=row id=section-15> <div class=col-md-4> <p>There, logic can be done with the element instance and the returned value.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-keyword>var</span> processedResult = (result || <span class=hljs-string>''</span>).toLowerCase();</pre></div></div> </div> </div> <div class=row id=section-16> <div class=col-md-4> <p><code>processedResult</code> will be the returned value of the function <code>next</code> into the previous stacked callback.</p> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>    <span class=hljs-keyword>return</span> processedResult;
}</pre></div></div> </div> </div> <div class=row id=section-17> <div class=col-md-4> <h3 id=intercept>Intercept</h3> </div> <div class=col-md-8> </div> </div> <div class=row id=section-18> <div class=col-md-4> <p>The builder’s method <code>intercept</code> adds to the structure the given interceptors according to the intercepted property.</p> <blockquote> <p>@param name (string) the name of the property to intercept @param interceptWrite (function) the callback for write accesses @param interceptRead (function) the callback for read accesses</p> </blockquote> </div> <div class=col-md-8> <div class="hljs javascript"><div class=highlight><pre>
builder.intercept(<span class=hljs-string>'propIntercepted'</span>, interceptWrite, interceptRead);</pre></div></div> </div> </div> <div class=row id=section-19> <div class=col-md-4> <p>The first argument of the method <code>intercept</code> is the property name. The second argument is the callback dedicated to the write access, it’s optional. The third argument is the callback dedicated to the read access, it’s optional.</p> </div> <div class=col-md-8> </div> </div> <div class=row id=section-20> <div class=col-md-4> <p>The write accesses of the property <code>propIntercepted</code> will be intercepted by the callback <code>interceptWrite</code>. The read accesses of the property <code>propIntercepted</code> will be intercepted by the callback <code>interceptRead</code>.</p> </div> <div class=col-md-8> </div> </div> </section> </main> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-20179310-4', '/custom-elements-builder');
  ga('send', 'pageview');</script>  