<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Usage</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/tmorin/ceb.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="installation">
    <h1 class="manual-toc-title"><a href="manual/installation.html" data-ice="title">Installation</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/installation.html#from-npm-or-bower" data-ice="link">From npm or bower</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/installation.html#from-source" data-ice="link">From source</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#other-npm-tasks" data-ice="link">Other npm tasks</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/installation.html#integration" data-ice="link">Integration</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#polyfills" data-ice="link">Polyfills</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#as-a-global-variable" data-ice="link">As a global variable</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#amd" data-ice="link">AMD</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#systemjs" data-ice="link">SystemJS</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#commonjs" data-ice="link">CommonJS</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/installation.html#es2015" data-ice="link">ES2015</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="usage">
    <h1 class="manual-toc-title"><a href="manual/usage.html" data-ice="title">Usage</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#element-" data-ice="link">element()</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#register-an-element" data-ice="link">Register an element</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#extending-native-elements" data-ice="link">Extending (native) elements</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#consume-dedicated-builders" data-ice="link">Consume dedicated builders</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#life-cycle" data-ice="link">Life cycle</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#provide-dedicated-builders" data-ice="link">Provide dedicated builders</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#property-" data-ice="link">property()</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#add-an-immutable-fields" data-ice="link">Add an immutable fields</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#add-setter-and-getter-with-a-default-value" data-ice="link">Add setter and getter with a default value</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#attribute-" data-ice="link">attribute()</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#add-an-attribute" data-ice="link">Add an attribute</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#add-boolean-attribute" data-ice="link">Add boolean attribute</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#unbound-an-attribute-to-its-property" data-ice="link">Unbound an attribute to its property</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#override-name-of-its-bound-property" data-ice="link">Override name of its bound property</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#listen-the-attribute-value" data-ice="link">Listen the attribute value</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#method-" data-ice="link">method()</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#add-method" data-ice="link">Add method</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#wrap-a-method" data-ice="link">Wrap a method</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#delegate-" data-ice="link">delegate()</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#from-an-attribute-to-the-same-attribute-name" data-ice="link">From an attribute to the same attribute name</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#from-an-attribute-to-another-property-name" data-ice="link">From an attribute to another property name</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#from-a-method-to-the-same-method-name" data-ice="link">From a method to the same method name</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#from-a-method-to-an-another-method-name" data-ice="link">From a method to an another method name</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#on-" data-ice="link">on()</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#listen-during-the-bubbling-phase" data-ice="link">Listen during the bubbling phase</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#listen-during-the-capture-phase" data-ice="link">Listen during the capture phase</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#-preventdefault-and-stoppropagation-" data-ice="link">.preventDefault() and .stopPropagation()</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#event-delegation" data-ice="link">Event delegation</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#template-" data-ice="link">template()</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#light-and-shadow-dom" data-ice="link">Light and shadow DOM</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#handling-a-pseudo-shadow-dom" data-ice="link">Handling a pseudo Shadow DOM</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#getting-the-light-dom-node" data-ice="link">Getting the light DOM node</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#example" data-ice="link">Example</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="example">
    <h1 class="manual-toc-title"><a href="manual/example.html" data-ice="title">Example</a></h1>
    <ul class="manual-toc">
      
    </ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <h1 class="manual-toc-title"><a href="identifiers.html" data-ice="title">Reference</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#class" data-ice="link">Class</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#function" data-ice="link">Function</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="changelog">
    <h1 class="manual-toc-title"><a href="manual/changelog.html" data-ice="title">Changelog</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-6-x" data-ice="link">0.6.x</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-5-x" data-ice="link">0.5.x</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-3-4" data-ice="link">0.3.4</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-3-3" data-ice="link">0.3.3</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-3-2" data-ice="link">0.3.2</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-3-1" data-ice="link">0.3.1</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-3-0" data-ice="link">0.3.0</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-2-4" data-ice="link">0.2.4</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-2-3" data-ice="link">0.2.3</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-2-2" data-ice="link">0.2.2</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-2-1" data-ice="link">0.2.1</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-2-0" data-ice="link">0.2.0</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-1-1" data-ice="link">0.1.1</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/changelog.html#0-1-0" data-ice="link">0.1.0</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-breadcrumb-list">
    <a href="./manual/./index.html">Manual</a>
    <span>&#xBB;</span>
    <span data-ice="title">Usage</span>
  </div>
  <div data-ice="content"><h1 id="element-">element()</h1>
<p>The function <code>element()</code> return a fresh <code>ElementBuilder</code> providing services to register a ... custom element.</p>
<h2 id="register-an-element">Register an element</h2>
<p>An element is registered with the method <code>register()</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element} from &apos;ceb&apos;;
var MyCustomElement = element().register(&apos;my-custom-element&apos;);</code>
</code></pre>
<p>Now the custom element can be used like another regular <code>HTMLElement</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">document.createElement(&apos;my-custom-element&apos;);</code>
</code></pre>
<pre><code class="lang-html"><code class="source-code prettyprint">&lt;my-custom-element&gt;&lt;/my-custom-element&gt;</code>
</code></pre>
<h2 id="extending-native-elements">Extending (native) elements</h2>
<p>By default the prototype of the future custom element is <code>Object.create(HTMLElement.prototype)</code>.
The method <code>base()</code> can be used to override the default value.</p>
<p>To extend a native HTML element, the method <code>base()</code> can also be to set the name of the native element.</p>
<p>See the <a href="http://w3c.github.io/webcomponents/spec/custom/#api-element-registration-options">specification</a> to get more information. </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element} from &apos;ceb&apos;;
var MyCustomButton = element()
    .base(Object.create(HTMLButtonElement.prototype), &apos;button&apos;)
    .register(&apos;my-custom-button&apos;);</code>
</code></pre>
<p>Now the custom element can be used like another regular <code>HTMLButtonElement</code>.</p>
<p>However to create a custom element extending a native one, the syntax is different. </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">document.createElement(&apos;button&apos;, &apos;my-custom-button&apos;);</code>
</code></pre>
<pre><code class="lang-html"><code class="source-code prettyprint">&lt;button is=&quot;my-custom-button&quot;&gt;&lt;/button&gt;</code>
</code></pre>
<p>The arguments of the method <code>base()</code> can be swapped:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">element().base(prototypeValue, extendsValue);
element().base(extendsValue, prototypeValue);</code>
</code></pre>
<p>The method <code>base()</code> can also be called sequentially:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">// set the prototype
element().base(prototypeValue);

// then if needed, set the name of the native element
element().base(extendsValue);</code>
</code></pre>
<h2 id="consume-dedicated-builders">Consume dedicated builders</h2>
<p>The user friendly way to use dedicated builders is provided by the method <code>builders()</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute, property} from &apos;ceb&apos;;
var MyCustomElement = element()
    .builders(
        attribute(&apos;att1&apos;),
        property(&apos;prop1&apos;).immutable().value(&apos;I am a constant&apos;)
    )
    .builders(attribute(&apos;att2&apos;))
    .register(&apos;my-custom-element&apos;);</code>
</code></pre>
<p>Builders are executed sequentially when <code>register()</code> is called.
That means, <code>attribute(&apos;att1&apos;)</code> will be executed first and <code>attribute(&apos;att2&apos;)</code> will be the last one.</p>
<h2 id="life-cycle">Life cycle</h2>
<p>The build process of <code>register()</code> is composed of two steps:</p>
<ul>
<li>the dedicated builders executions</li>
<li>the registration of the Custom Element</li>
</ul>
<p>These steps raise the following events:</p>
<ul>
<li>before:builders</li>
<li>after:builders</li>
<li>before:registerElement</li>
<li>after:registerElement</li>
</ul>
<p>The life cycle of the future Custom Element also raise events:</p>
<ul>
<li>before:createdCallback</li>
<li>after:createdCallback</li>
<li>before:attachedCallback</li>
<li>after:attachedCallback</li>
<li>before:detachedCallback</li>
<li>after:detachedCallback</li>
<li>before:attributeChangedCallback</li>
<li>after:attributeChangedCallback</li>
</ul>
<p>The method <code>on()</code> registers a callback about the events listed above.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element} from &apos;ceb&apos;;
var MyDummyButtonElement = element()
    .on(&apos;before:createdCallback&apos;, el =&gt; el.innerHTML = &apos;&lt;button&gt;&lt;/button&gt;&apos;)
    .register(&apos;my-dummy-button-element&apos;);</code>
</code></pre>
<p>The events <code>before:builders</code>, <code>after:builders</code> and <code>before:registerElement</code> are called with the context of the builder a argument.</p>
<p>The event <code>after:registerElement</code> is called with the type of the custom element.</p>
<p>The events linked to the life cycle of the Custom Element are called with the custom element as argument.</p>
<p>The events <code>before:attributeChangedCallback</code> and <code>after:attributeChangedCallback</code> are called with the custom element, the attribute name, the old value and the new one.</p>
<h2 id="provide-dedicated-builders">Provide dedicated builders</h2>
<p>In <code>register()</code>, a dedicated builder is an object having a method <code>build()</code>, otherwise the builder will be ignored.</p>
<p>The methods <code>build()</code> are called with the following arguments:</p>
<ul>
<li>the prototype of the future Custom Element</li>
<li>the instance of the method <code>on()</code></li>
</ul>
<p>Basically, the logic of the builder is implemented into the method <code>build()</code>.
All stuff which can not be done during the execution of the method <code>build()</code>, can be executed later using the function <code>on()</code>. </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element} from &apos;ceb&apos;;
var MyDummyButtonElement = element()
    .builders({
        build(proto, on) {
            // this will be executed once by register call
            Object.defineProperty(proto, &apos;prop1&apos;, {
                writable: false,
                value: &apos;value1&apos;
            });
            on(&apos;before:createdCallback&apos;, el =&gt; {
                // this will be executed for each created custom element
                el.innerHTML = &apos;&lt;button&gt;&lt;/button&gt;&apos;;
            });
        }
    })
    .register(&apos;my-dummy-button-element&apos;);</code>
</code></pre>
<h1 id="property-">property()</h1>
<p>The function <code>property()</code> returns a fresh <code>PropertyBuilder</code> providing services to define ... a property.</p>
<p>At the end the property is added to the prototype via <code>Object.defineProperty()</code>.</p>
<h2 id="add-an-immutable-fields">Add an immutable fields</h2>
<p>The registered custom element will have a property <code>prop1</code> initialized with the value <code>value1</code>.
But, the property can not be deleted, and its value can not be updated.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, property} from &apos;ceb&apos;;
element()
    .builders(
        property(&apos;prop1&apos;).immutable().value(&apos;value1&apos;)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="add-setter-and-getter-with-a-default-value">Add setter and getter with a default value</h2>
<p>The registered custom element will have a property <code>prop1</code> initialized with the value <code>0</code>.</p>
<p>When the property is set, its value will be incremented.</p>
<p>Getter and setter are invoked with the custom element as first argument.
So, fill free to forget the <code>this</code> keyword.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, property} from &apos;ceb&apos;;
element()
    .builders(
        property(&apos;prop1&apos;)
            .setter((el, value) =&gt; {
                el._prop1 = value + 1; 
            })
            .getter(el =&gt; {
                return el._prop1;
            })
            .value(0)
        )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h1 id="attribute-">attribute()</h1>
<p>The function <code>attribute()</code> returns a fresh <code>AttributeBuilder</code> providing services to define ... an attribute.</p>
<p>Attributes are by default bound to a property.
So, the value can be read or updated from both API DOM and property.</p>
<h2 id="add-an-attribute">Add an attribute</h2>
<p>The registered custom element will have a property <code>att1</code> bound to an attribute <code>att1</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute} from &apos;ceb&apos;;
element()
    .builders(
        attribute(&apos;att1&apos;)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="add-boolean-attribute">Add boolean attribute</h2>
<p>The registered custom element will have a property <code>att1</code> bound to an attribute <code>att1</code>.
But when the property <code>att1</code> is <code>true</code>, the attribute <code>att1</code> get an empty value.
And when the property <code>att1</code> is <code>false</code>, the attribute <code>att1</code> is not present into the DOM.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute} from &apos;ceb&apos;;
element()
    .builders(
        attribute(&apos;att1&apos;).boolean()
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="unbound-an-attribute-to-its-property">Unbound an attribute to its property</h2>
<p>By default the attribute will be linked to a property.
The link can be skip calling the <code>.unbound()</code> method.</p>
<p>The registered custom element will have an attribute <code>att1</code>.
But the property <code>att1</code> will not be defined, and obviously not bound to the attribute.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute} from &apos;ceb&apos;;
element()
    .builders(
        attribute(&apos;att1&apos;).unbound()
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="override-name-of-its-bound-property">Override name of its bound property</h2>
<p>The registered custom element will have a property <code>prop1</code> bound to an attribute <code>att1</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute} from &apos;ceb&apos;;
element()
    .builders(
        attribute(&apos;att1&apos;).property(&apos;prop1&apos;)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="listen-the-attribute-value">Listen the attribute value</h2>
<p>Listeners are called when the attribute&apos;s value is updated.
When the attribute has the flag <em>boolean</em>, <code>oldVal</code> and <code>newVal</code> will boolean values.
Otherwise, it will be string values.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute} from &apos;ceb&apos;;
element()
    .builders(
        attribute(&apos;att1&apos;)
            .listen((el, oldVal, newVal) =&gt; {
                /* oldVal was the (string) value of the attribute and
                   newVal is the current (string) value of the attribute */
            })
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h1 id="method-">method()</h1>
<p>The function <code>method()</code> returns a fresh <code>MethodBuilder</code> providing services to define a method and ... more.</p>
<p>The methods are invoked with the custom element as first argument.
So, fill free to forget the <code>this</code> keyword.</p>
<h2 id="add-method">Add method</h2>
<p>The registered custom element will have a method <code>meth1</code>.</p>
<p>When the method is invoked, the returned value should be <code>Hello world! from ceb-example</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, method} from &apos;ceb&apos;;
element()
    .builders(
        method(&apos;meth1&apos;).invoke((el, name) =&gt; `Hello ${name}! from ${el.tagName}`)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="wrap-a-method">Wrap a method</h2>
<p>The registered custom element will have a method <code>meth1</code>.</p>
<p>But, when the method is invoked, the returned value should be <code>HELLO WORLD! FROM CEB-EXAMPLE</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute} from &apos;ceb&apos;;
element()
    .builders(
        method(&apos;meth1&apos;)
            .invoke((el, name) =&gt; `Hello ${name}! from ${el.tagName}`)
            .wrap((next, el, name) =&gt; next(el, name.toTrim()).toUpperCase())
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h1 id="delegate-">delegate()</h1>
<p>The function <code>delegate()</code> returns a fresh <code>DelegateBuilder</code> providing services to define delegations on properties, attributes and methods.</p>
<p>The delegation is useful when the custom element is a composition of native elements.
For instance, to delegate the <em>disabled</em> state of a custom button to the native one.
Or to delegate the <em>focus</em> behavior of a custom button to the native one.</p>
<p>The API allows to:</p>
<ul>
<li>delegate from a property to a property</li>
<li>delegate from a property to an attribute</li>
<li>delegate from an attribute to a property</li>
<li>delegate from an attribute to an attribute</li>
<li>delegate from a method to a method</li>
</ul>
<h2 id="from-an-attribute-to-the-same-attribute-name">From an attribute to the same attribute name</h2>
<p>The registered custom element will have an attribute and a property <code>disabled</code>,
but its value is really hosted by the first child button found.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute, delegate} from &apos;ceb&apos;;
element()
    .builders(
        delegate(attribute(&apos;disabled&apos;)).to(&apos;button&apos;)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="from-an-attribute-to-another-property-name">From an attribute to another property name</h2>
<p>To realize cases a little bit more touchy, the targeted attribute/property can be overridden and the targeted name too. 
All combinations are available.</p>
<p>There, the attribute delegates to a property having another name.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, attribute, delegate} from &apos;ceb&apos;;
element()
    .builders(
        delegate(attribute(&apos;custom-disabled&apos;)).to(&apos;button&apos;).property(&apos;disabled&apos;)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="from-a-method-to-the-same-method-name">From a method to the same method name</h2>
<p>Method invocations can also be delegated. </p>
<p>There, the invocation of the method <code>focus</code> will invoke the method <code>focus</code> of the first child button found.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, method, delegate} from &apos;ceb&apos;;
element()
    .builders(
        delegate(method(&apos;focus&apos;)).to(&apos;button&apos;)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="from-a-method-to-an-another-method-name">From a method to an another method name</h2>
<p>As for attributes and properties, the name of the delegated method can be overridden. </p>
<p>There, the invocation of the method <code>applyFocus</code> will invoke the method <code>focus</code> of the first child button found.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, method, delegate} from &apos;ceb&apos;;
element()
    .builders(
        delegate(method(&apos;applyFocus&apos;)).to(&apos;button&apos;).method(&apos;focus&apos;)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h1 id="on-">on()</h1>
<p>The function <code>on()</code> returns a fresh <code>OnBuilder</code> providing services to define event listeners.</p>
<p>The builder is able to simply listening events or handle event delegation.</p>
<p>Listeners are added on <code>attachedCallback</code> and removed on <code>detachedCallback</code>.</p>
<h2 id="listen-during-the-bubbling-phase">Listen during the bubbling phase</h2>
<p>If the user clicks on the custom element or one of its children, the message <em>triggered by CEB-EXAMPLE</em> will be logged.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, on} from &apos;ceb&apos;;
element()
    .builders(
        on(&apos;click&apos;).invoke((el, evt, target) =&gt; console.log(&apos;triggered by %s&apos;, target.tagName))
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="listen-during-the-capture-phase">Listen during the capture phase</h2>
<p>If the user clicks on the custom element or one of its children, the message <em>triggered by CEB-EXAMPLE</em> will be logged.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, on} from &apos;ceb&apos;;
element()
    .builders(
        on(&apos;click&apos;).capture().invoke((el, evt, target) =&gt; console.log(&apos;triggered by %s&apos;, target.tagName))
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="-preventdefault-and-stoppropagation-">.preventDefault() and .stopPropagation()</h2>
<p><code>.prevent()</code> will call the method <code>.preventDefault()</code> of the event.
<code>.stop()</code> will call the method <code>.stopPropagation()</code> of the event.
<code>.skip()</code> will call the methods <code>.preventDefault()</code> and <code>.stopPropagation()</code> of the event.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, on} from &apos;ceb&apos;;
element()
    .builders(
        on(&apos;click&apos;).prevent(),
        on(&apos;mouseover&apos;).stop(),
        on(&apos;keypress&apos;).skip()
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="event-delegation">Event delegation</h2>
<p>If the user clicks on <code>p.message</code>, nothing will happened.</p>
<p>If the user clicks on <code>button.ok</code> or one of its children, the message <em>Ok! triggered by BUTTON</em> will be logged.</p>
<p>If the user clicks on <code>button.cancel</code> or one of its children, the message <em>Cancel! triggered by BUTTON</em> will be logged.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, on, template} from &apos;ceb&apos;;
element()
    .builders(
        template(`
            &lt;p class=&quot;message&quot;&gt;&lt;/p&gt;
            &lt;button class=&quot;ok&quot;&gt;&lt;i class=&quot;fa fa-check&quot;&gt;&lt;/i&gt; Ok&lt;/button&gt;
            &lt;button class=&quot;cancel&quot;&gt;&lt;i class=&quot;fa fa-ban&quot;&gt;&lt;/i&gt; Cancel&lt;/button&gt;
        `)
        on(&apos;click&apos;).delegate(&apos;button.ok&apos;).invoke((el, evt, target) =&gt; console.log(&apos;Ok! triggered by %s&apos;, target.tagName)),
        on(&apos;click&apos;).delegate(&apos;button.cancel&apos;).invoke((el, evt, target) =&gt; console.log(&apos;Cancelled! triggered by %s&apos;, target.tagName))
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h1 id="template-">template()</h1>
<p>The function <code>template()</code> returns a fresh <code>TemplateBuilder</code> providing services to define ... a template.</p>
<p>The template can be given as a <code>string</code> or a <code>function</code>. The function will be called on <code>createdCallback</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, template} from &apos;ceb&apos;;
element()
    .builders(
        template(`&lt;button&gt;&lt;/button&gt;`)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, template} from &apos;ceb&apos;;
element()
    .builders(
        template(el =&gt; `&lt;button&gt;${el.tagName}&lt;/button&gt;`)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<h2 id="light-and-shadow-dom">Light and shadow DOM</h2>
<p>According to <a href="http://caniuse.com/#search=Shadow%20DOM">caniuse.com</a>,
the Shadow DOM isn&apos;t yet implemented by most of the browsers.</p>
<p>However, the template builder is able to simulate a part of its behaviors
when a custom element needs to wrap its light DOM with others elements.</p>
<h2 id="handling-a-pseudo-shadow-dom">Handling a pseudo Shadow DOM</h2>
<p>If the <em>pseudo Shadow</em> flag is not defined, the light DOM of the custom element will be lost.
The flag can be an attribute (<code>ceb-content</code>) or like the Shadow DOM specification expect: an element (<code>content</code>).</p>
<p>If an attribute (<code>ceb-content</code>) is found, the light DOM nodes of the custom element will be moved inside the attribute&apos;s element.</p>
<p>If the element (<code>content</code>) is found, it will be replaced by a <code>ceb-lightdom</code> element, and the light DOM nodes will be moved inside this one.</p>
<h2 id="getting-the-light-dom-node">Getting the light DOM node</h2>
<p>Custom element augmented with <code>template()</code> get a property <code>lightDOM</code> which returns the light DOM element.
If the template doesn&apos;t have the <em>pseudo Shadow</em> flag, the <code>lightDOM</code> will return the custom element itself.</p>
<p>Furthermore, the templating process is able to handle embedded light DOM.
In this case, the <code>lightDOM</code> value of the root node, will be the <code>lightDOM</code> of the last child having a <em>pseudo Shadow</em> flag.</p>
<h2 id="example">Example</h2>
<p>So, given the following custom element: </p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {element, template, attribute, delegate} from &apos;ceb&apos;;
element()
    .builders(
        // when the icon attribute is updated, the icon property will be manually updated 
        attribute(&apos;icon&apos;).unbound().value(&apos;ckeck&apos;).listen((el, oldVal, newVal) =&gt; el.icon = `fa fa-${newVal}`),

        // when the icon updated, the class attribute of the i element will be updated
        delegate(property(&apos;icon&apos;)).to(&apos;i&apos;).attribute(&apos;class&apos;),

        // when the attribute or property is updated, the property disabled of the button will be also updated
        delegate(attribute(&apos;disabled&apos;).boolean()).to(&apos;button&apos;).property(),

        // when the focus method is invoked, the focus method the button will be also invoked
        delegate(method(&apos;focus&apos;)).to(&apos;button&apos;),

        template(`
            &lt;button&gt;
                &lt;i class=&quot;fa fa-check&quot;&gt;&lt;/i&gt;
                &lt;content&gt;&lt;/content&gt;
            &lt;/button&gt;
        `)
    )
    .register(&apos;ceb-example&apos;);</code>
</code></pre>
<p>Which can be used like below:</p>
<pre><code class="lang-html"><code class="source-code prettyprint">&lt;ceb-example icon=&quot;check&quot; disabled&gt;
    &lt;strong&gt;OK&lt;/strong&gt;
&lt;/ceb-example&gt;</code>
</code></pre>
<p>Will be closed to the following HTML fragment:</p>
<pre><code class="lang-html"><code class="source-code prettyprint">&lt;ceb-example icon=&quot;check&quot; disabled&gt;
    &lt;button&gt;
        &lt;i class=&quot;fa fa-check&quot;&gt;&lt;/i&gt;
        &lt;ceb-lightdom&gt;
            &lt;strong&gt;OK&lt;/strong&gt;
        &lt;/ceb-lightdom&gt;
    &lt;/button&gt;
&lt;/ceb-example&gt;</code>
</code></pre>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.3)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
