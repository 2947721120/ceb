<!DOCTYPE html> <html class=no-js> <head> <meta charset=utf-8> <title>ceb's presentation page - just a builder, natively scalable and designed for FRP</title> <meta name=description content="Custom Elements Builder (ceb) is just a builder, natively scalable and designed for FRP."> <meta name="keywords " content=Web,Components,Custom,Element,Elements,DOM,W3C,FRP,functional,reactive,template,builder> <meta name=language content=en> <meta name=author content="Thibault Morin"> <meta name=viewport content="width=device-width"> <link rel="shortcut icon" href=./6df2b309.favicon.ico> <link rel=stylesheet href=styles/a95abb3e.vendor.css> <link rel=stylesheet href=styles/b1451e81.main.css>  <body> <!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--> <nav class="navbar navbar-default"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand href="./">custom-element-builder</a> </div> <div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1> <ul class="nav navbar-nav"> <li class=active> <a href="./">Home <span class=sr-only>(current)</span></a> </li> <li> <a href=./install.html>Install</a> </li> <li> <a href=./guide>Guide</a> </li> <li> <a href=./features>Features</a> </li> </ul> </div> </div> </nav> <main role=main class=container> <section> <p class="lead text-center"> <a title="know more about the builder part" href=justabuilder.html>just a builder</a>, <a class="label label-primary" title="know more about the scalability part" href=nativelyscalable.html>natively scalable</a> and <!-- <a title="know more about the FRP part" href="designedforFRP.html">designed for FRP</a> --> designed for FRP </p> <br> </section> <section class=row> <p class=col-md-6> We would like to share the behavior of a tooltip across elements. By this way we will be more DRY, but it's not enough, we would like to hide the implementation of the tooltip too. So, if for any reasons we switch for another UI library, we just have to change the tooltip implementation, not in each elements. In <strong>ceb</strong>, we can do that playing with <strong>features</strong>. <br> Yes, a <strong>feature</strong> is just a function. </p> <pre class=col-md-6><code class=javascript>function tooltipFeature(el) {
    if (!el.tooltipFeature) {
        el.tooltipFeature = {};
    }
    return el.tooltipFeature;
}</code></pre> </section> <section class=row> <p class=col-md-6> With the previous function, we won't do beautiful things for our case. It's just the public API of the feature. The logic is done into the function <code>tooltipFeature.setup</code>. </p> <pre class=col-md-6><code class=javascript>tooltipFeature.setup = function (struct, builder, options) {</code></pre> </section> <section class=row> <p class=col-md-6> The following functions will handle the life cycle of the tooltip. As you can see, the implementation is locked to bootstrap. </p> <pre class=col-md-6><code class=javascript>    function apply(el, content) {
        if (!tooltipFeature(el).$tooltip) {
            tooltipFeature(el).$tooltip = $(el).tooltip({
                title: content,
                trigger: 'hover',
                placement: 'auto bottom'
            });
        } else {
            var bsTooltip = tooltipFeature(el)
                .$tooltip
                .data('bs.tooltip');
            bsTooltip.options.title = content;
            bsTooltip
                .tip()
                .find('.tooltip-inner')
                .text(content);
        }
    }
    function destroy(el) {
        if (tooltipFeature(el).$tooltip) {
            tooltipFeature(el).$tooltip.tooltip('destroy');
            tooltipFeature(el).$tooltip = null;
        }
    }</code></pre> </section> <section class=row> <p class=col-md-6> When the tooltip property is updated, the tooltip content must be updated too. </p> <pre class=col-md-6><code class=javascript>    builder.intercept('tooltip', function (
        next, el, propName, value
    ) {
        apply(el, value);
        return next(value);
    });</code></pre> </section> <section class=row> <p class=col-md-6> When the element is inserted into the DOM, the tooltip must be available. </p> <pre class=col-md-6><code class=javascript>    builder.wrap('attachedCallback', function (next, el) {
        apply(el, el.tooltip);
        return next(arguments);
    });</code></pre> </section> <section class=row> <p class=col-md-6> When the element is removed from the DOM, the tooltip must be destroyed. </p> <pre class=col-md-6><code class=javascript>    builder.wrap('detachedCallback', function (el) {
        destroy(el);
        return next(arguments);
    });</code></pre> </section> <section class=row> <p class=col-md-6> It's done, the feature is ready to be used. </p> <pre class=col-md-6><code class=javascript>};</code></pre> </section> <section class=row> <p class=col-md-6> Let's go, we define a tooltiped input element. </p> <pre class=col-md-6><code class=javascript>var builder = g.ceb().name('tooltiped-input').properties({
    tooltip: {
        attribute: true
    }
}).feature(g.cebFeatureTemplate, {
    template: '&lt;input type="text"&gt;'
});</code></pre> </section> <section class=row> <p class=col-md-6> We add our freshly top mega fun tooltip feature to the structure. </p> <pre class=col-md-6><code class=javascript>builder.feature(g.tooltipFeature);</code></pre> </section> <section class=row> <p class=col-md-6> We let the control to <strong>ceb</strong> and ... </p> <pre class=col-md-6><code class=javascript>builder.register();</code></pre> </section> <section class=row> <p class=col-md-6> <tooltiped-input tooltip="I am a tooltip"></tooltiped-input> ... mouve your mouse over the input. </p> <pre class=col-md-6><code class=html>&lt;tooltiped-input tooltip="I am a tooltip"&gt;&lt;/tooltiped-input&gt;</code></pre> </section> </main> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-20179310-4', '/custom-elements-builder');
      ga('send', 'pageview');</script> <script src=scripts/f14daa95.vendor.js></script> <script src=scripts/a6ae7015.main.js></script>  