{"version":3,"sources":["lib/builder/CustomElementBuilder.min.js"],"names":["System","register","_export","_classCallCheck","instance","Constructor","TypeError","applyLifecycle","context","name","proto","original","beforeFns","events","afterFns","_this","this","args","concat","toArray","arguments","forEach","fn","apply","isFunction","helper","CustomElementBuilder","isString","flatten","invoke","partial","bind","LIFECYCLE_CALLBACKS","LIFECYCLE_EVENTS","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","setters","_lodashLangIsStringJs","_lodashLangIsFunctionJs","_lodashLangToArrayJs","_lodashArrayFlattenJs","_lodashCollectionInvokeJs","_lodashFunctionPartialJs","_lodashFunctionBindJs","execute","map","create","HTMLElement","builders","reduce","a","b","before:builders","after:builders","before:registerElement","after:registerElement","value","_this2","_len","Array","_key","builder","push","event","_this3","cb","_this4","on","options","CustomElement","document","registerElement"],"mappings":"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","file":"lib/builder/CustomElementBuilder.min.js","sourcesContent":["System.register(['lodash/lang/isString.js', 'lodash/lang/isFunction.js', 'lodash/lang/toArray.js', 'lodash/array/flatten.js', 'lodash/collection/invoke.js', 'lodash/function/partial.js', 'lodash/function/bind.js'], function (_export) {\n    'use strict';\n\n    var isString, isFunction, toArray, flatten, invoke, partial, bind, LIFECYCLE_CALLBACKS, LIFECYCLE_EVENTS, CustomElementBuilder;\n\n    var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n    _export('default', helper);\n\n    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\n    function applyLifecycle(context, name) {\n        var proto = context.proto,\n            original = proto[name],\n            beforeFns = context.events['before:' + name],\n            afterFns = context.events['after:' + name];\n\n        proto[name] = function () {\n            var _this = this;\n\n            var args = [this].concat(toArray(arguments));\n\n            beforeFns.forEach(function (fn) {\n                return fn.apply(_this, args);\n            });\n\n            if (isFunction(original)) {\n                original.apply(this, args);\n            }\n\n            afterFns.forEach(function (fn) {\n                return fn.apply(_this, args);\n            });\n        };\n    }\n\n    /**\n     * @ignore\n     */\n\n    function helper() {\n        return new CustomElementBuilder();\n    }\n\n    return {\n        setters: [function (_lodashLangIsStringJs) {\n            isString = _lodashLangIsStringJs['default'];\n        }, function (_lodashLangIsFunctionJs) {\n            isFunction = _lodashLangIsFunctionJs['default'];\n        }, function (_lodashLangToArrayJs) {\n            toArray = _lodashLangToArrayJs['default'];\n        }, function (_lodashArrayFlattenJs) {\n            flatten = _lodashArrayFlattenJs['default'];\n        }, function (_lodashCollectionInvokeJs) {\n            invoke = _lodashCollectionInvokeJs['default'];\n        }, function (_lodashFunctionPartialJs) {\n            partial = _lodashFunctionPartialJs['default'];\n        }, function (_lodashFunctionBindJs) {\n            bind = _lodashFunctionBindJs['default'];\n        }],\n        execute: function () {\n            LIFECYCLE_CALLBACKS = ['createdCallback', 'attachedCallback', 'detachedCallback', 'attributeChangedCallback'];\n            LIFECYCLE_EVENTS = flatten(LIFECYCLE_CALLBACKS.map(function (name) {\n                return ['before:' + name, 'after:' + name];\n            }));\n\n            /**\n             * The custom element builder.\n             * Its goal is to provide a user friendly way to do it by some else (i.e. dedicated builders).\n             */\n\n            CustomElementBuilder = (function () {\n\n                /**\n                 */\n\n                function CustomElementBuilder() {\n                    _classCallCheck(this, CustomElementBuilder);\n\n                    var proto = Object.create(HTMLElement.prototype),\n                        builders = [],\n                        events = LIFECYCLE_EVENTS.reduce(function (a, b) {\n                        a[b] = [];\n                        return a;\n                    }, {\n                        'before:builders': [],\n                        'after:builders': [],\n                        'before:registerElement': [],\n                        'after:registerElement': []\n                    });\n                    /**\n                     * @type {Object}\n                     * @property {!Object} proto - the prototype\n                     * @property {!string} extends - the name of a native element\n                     * @desc the context of the builder\n                     */\n                    this.context = { proto: proto, builders: builders, events: events };\n                }\n\n                /**\n                 * To extend a native element.\n                 * @param {!string} value the name of the element\n                 * @returns {CustomElementBuilder} the builder\n                 */\n\n                _createClass(CustomElementBuilder, [{\n                    key: 'extends',\n                    value: function _extends(value) {\n                        this.context['extends'] = value;\n                        return this;\n                    }\n\n                    /**\n                     * To override the default prototype.\n                     * @param {!Object} value the prototype\n                     * @returns {CustomElementBuilder} the builder\n                     */\n                }, {\n                    key: 'proto',\n                    value: function proto(value) {\n                        this.context.proto = value;\n                        return this;\n                    }\n\n                    /**\n                     * To apply the given builders during the build process.\n                     * @param {...Builder} builders the builders\n                     * @returns {CustomElementBuilder} the builder\n                     */\n                }, {\n                    key: 'augment',\n                    value: function augment() {\n                        var _this2 = this;\n\n                        for (var _len = arguments.length, builders = Array(_len), _key = 0; _key < _len; _key++) {\n                            builders[_key] = arguments[_key];\n                        }\n\n                        builders.forEach(function (builder) {\n                            return _this2.context.builders.push(builder);\n                        });\n                        return this;\n                    }\n\n                    /**\n                     * To register call back on events.\n                     * @param {!string} event the event name\n                     * @returns {Object} the on builder.\n                     * @property {function(callback: function)} invoke - to register the callback\n                     */\n                }, {\n                    key: 'on',\n                    value: function on(event) {\n                        var _this3 = this;\n\n                        var invoke = function invoke(cb) {\n                            _this3.context.events[event].push(cb);\n                            return _this3;\n                        };\n                        return { invoke: invoke };\n                    }\n\n                    /**\n                     * To register the custom element.\n                     * @param {!string} name the name of the cutsom element\n                     * @returns {Element} the custom element Type\n                     */\n                }, {\n                    key: 'register',\n                    value: function register(name) {\n                        var _this4 = this;\n\n                        this.context.events['before:builders'].forEach(function (fn) {\n                            return fn(_this4.context);\n                        });\n\n                        invoke(this.context.builders, 'build', this.context.proto, bind(this.on, this));\n\n                        this.context.events['after:builders'].forEach(function (fn) {\n                            return fn(_this4.context);\n                        });\n\n                        LIFECYCLE_CALLBACKS.forEach(partial(applyLifecycle, this.context));\n\n                        var options = { prototype: this.context.proto };\n\n                        if (isString(this.context['extends'])) {\n                            options['extends'] = this.context['extends'];\n                        }\n\n                        this.context.events['before:registerElement'].forEach(function (fn) {\n                            return fn(_this4.context);\n                        });\n\n                        var CustomElement = document.registerElement(name, options);\n\n                        this.context.events['after:registerElement'].forEach(function (fn) {\n                            return fn(CustomElement);\n                        });\n\n                        return CustomElement;\n                    }\n                }]);\n\n                return CustomElementBuilder;\n            })();\n\n            _export('CustomElementBuilder', CustomElementBuilder);\n        }\n    };\n});"],"sourceRoot":"/source/"}