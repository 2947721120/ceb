{"version":3,"sources":["lib/builder/OnBuilder.min.js"],"names":["System","register","_export","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","helper","tpl","OnBuilder","isFunction","toArray","find","noop","Builder","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","defineProperty","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getter","Function","getOwnPropertyDescriptor","get","call","getPrototypeOf","setters","_lodashLangIsFunctionJs","_lodashLangToArrayJs","_lodashCollectionFindJs","_lodashUtilityNoopJs","_BuilderJs","execute","_Builder","events","this","data","invoke","fn","capture","selector","preventDefault","stopPropagation","prevent","stop","proto","on","split","map","event","trim","el","_cebOnHandlers","listener","evt","querySelectorAll","contains","_ref","_ref2","name","querySelector","filter","_ref3","_ref32","_ref4","_ref42","addEventListener","forEach","_ref5","_ref52","_ref6","_ref62","removeEventListener"],"mappings":"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","file":"lib/builder/OnBuilder.min.js","sourcesContent":["System.register(['lodash/lang/isFunction.js', 'lodash/lang/toArray.js', 'lodash/collection/find.js', 'lodash/utility/noop.js', './Builder.js'], function (_export) {\n\n    /**\n     * The on builder.\n     * Its goal is to provide a way to listen events coming from the custom element.\n     * @extends {Builder}\n     */\n    'use strict';\n\n    var isFunction, toArray, find, noop, Builder, OnBuilder;\n\n    var _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\n    var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\n    var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\n    _export('default', helper);\n\n    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\n    function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n    /**\n     * @ignore\n     */\n\n    function helper(tpl) {\n        return new OnBuilder(tpl);\n    }\n\n    return {\n        setters: [function (_lodashLangIsFunctionJs) {\n            isFunction = _lodashLangIsFunctionJs['default'];\n        }, function (_lodashLangToArrayJs) {\n            toArray = _lodashLangToArrayJs['default'];\n        }, function (_lodashCollectionFindJs) {\n            find = _lodashCollectionFindJs['default'];\n        }, function (_lodashUtilityNoopJs) {\n            noop = _lodashUtilityNoopJs['default'];\n        }, function (_BuilderJs) {\n            Builder = _BuilderJs['default'];\n        }],\n        execute: function () {\n            OnBuilder = (function (_Builder) {\n                _inherits(OnBuilder, _Builder);\n\n                /**\n                 * @param {!string} events a list of tuple 'event target' separated by comas, the target is optional\n                 */\n\n                function OnBuilder(events) {\n                    _classCallCheck(this, OnBuilder);\n\n                    _get(Object.getPrototypeOf(OnBuilder.prototype), 'constructor', this).call(this);\n                    /**\n                     * @ignore\n                     */\n                    this.data = { events: events, invoke: noop };\n                }\n\n                /**\n                 * To do something when events occurred.\n                 * The target arugment is by default the custom element.\n                 * When the delegate feature is used, target is the matched element.\n                 * @param {!function(el: HTMLElement, evt: DOMEvent, target: HTMLElement)} fn the event's logic\n                 * @returns {OnBuilder} the builder\n                 */\n\n                _createClass(OnBuilder, [{\n                    key: 'invoke',\n                    value: function invoke(fn) {\n                        if (isFunction(fn)) {\n                            this.data.invoke = fn;\n                        }\n                        return this;\n                    }\n\n                    /**\n                     * To attach the event on the capture phase instread of on the bubble phase.\n                     * @returns {OnBuilder} the builder\n                     */\n                }, {\n                    key: 'capture',\n                    value: function capture() {\n                        this.data.capture = true;\n                        return this;\n                    }\n\n                    /**\n                     * To delegate the event.\n                     * @param {!string} selector the selector\n                     * @returns {OnBuilder} the builder\n                     */\n                }, {\n                    key: 'delegate',\n                    value: function delegate(selector) {\n                        this.data.selector = selector;\n                        return this;\n                    }\n\n                    /**\n                     * To prevent the default behavior.\n                     * @returns {OnBuilder} the builder\n                     */\n                }, {\n                    key: 'prevent',\n                    value: function prevent() {\n                        this.data.preventDefault = true;\n                        return this;\n                    }\n\n                    /**\n                     * To stop the event propagation.\n                     * @returns {OnBuilder} the builder\n                     */\n                }, {\n                    key: 'stop',\n                    value: function stop() {\n                        this.data.stopPropagation = true;\n                        return this;\n                    }\n\n                    /**\n                     * To prevent the default behavior and to stop the event propagation.\n                     * @returns {OnBuilder} the builder\n                     */\n                }, {\n                    key: 'skip',\n                    value: function skip() {\n                        return this.prevent().stop();\n                    }\n\n                    /**\n                     * @ignore\n                     */\n                }, {\n                    key: 'build',\n                    value: function build(proto, on) {\n                        var events = this.data.events.split(',').map(function (event) {\n                            return event.trim().split(' ');\n                        }),\n                            capture = !!this.data.capture,\n                            invoke = this.data.invoke,\n                            selector = this.data.selector,\n                            stopPropagation = this.data.stopPropagation,\n                            preventDefault = this.data.preventDefault;\n\n                        on('before:createdCallback').invoke(function (el) {\n                            el._cebOnHandlers = [];\n                        });\n\n                        on('before:attachedCallback').invoke(function (el) {\n                            var listener = function listener(evt) {\n                                if (stopPropagation) {\n                                    evt.stopPropagation();\n                                }\n                                if (preventDefault) {\n                                    evt.preventDefault();\n                                }\n\n                                if (selector) {\n                                    var target = find(toArray(el.querySelectorAll(selector)), function (el) {\n                                        return el === evt.target || el.contains(evt.target);\n                                    });\n                                    if (target) {\n                                        invoke(el, evt, target);\n                                    }\n                                } else {\n                                    invoke(el, evt, el);\n                                }\n                            };\n\n                            el._cebOnHandlers = events.map(function (_ref) {\n                                var _ref2 = _slicedToArray(_ref, 2);\n\n                                var name = _ref2[0];\n                                var target = _ref2[1];\n                                return [name, target ? el.querySelector(target) : el];\n                            }).filter(function (_ref3) {\n                                var _ref32 = _slicedToArray(_ref3, 2);\n\n                                var name = _ref32[0];\n                                var target = _ref32[1];\n                                return !!target;\n                            }).map(function (_ref4) {\n                                var _ref42 = _slicedToArray(_ref4, 2);\n\n                                var name = _ref42[0];\n                                var target = _ref42[1];\n\n                                target.addEventListener(name, listener, capture);\n                                return [target, name, listener, capture];\n                            });\n\n                            el._cebOnHandlers.forEach(function (_ref5) {\n                                var _ref52 = _slicedToArray(_ref5, 4);\n\n                                var target = _ref52[0];\n                                var name = _ref52[1];\n                                var listener = _ref52[2];\n                                var capture = _ref52[3];\n                                return target.addEventListener(name, listener, capture);\n                            });\n                        });\n\n                        on('before:detachedCallback').invoke(function (el) {\n                            el._cebOnHandlers.forEach(function (_ref6) {\n                                var _ref62 = _slicedToArray(_ref6, 4);\n\n                                var target = _ref62[0];\n                                var name = _ref62[1];\n                                var listener = _ref62[2];\n                                var capture = _ref62[3];\n                                return target.removeEventListener(name, listener, capture);\n                            });\n                        });\n                    }\n                }]);\n\n                return OnBuilder;\n            })(Builder);\n\n            _export('OnBuilder', OnBuilder);\n        }\n    };\n});"],"sourceRoot":"/source/"}