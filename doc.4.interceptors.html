<!DOCTYPE html>

<html>
<head>
  <title>Interceptors</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>



  <div id="container">
    <div id="background"></div>

    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              <a class="source" href="index.html">
                index
              </a>
            
              <a class="source" href="doc.1.usage.html">
                doc - usage
              </a>
            
              <a class="source" href="doc.2.inheritance.html">
                doc - inheritance
              </a>
            
              <a class="source" href="doc.3.properties.html">
                doc - properties
              </a>
            
              <a class="source" href="doc.4.interceptors.html">
                doc - interceptors
              </a>
            
              <a class="source" href="doc.5.methods.html">
                doc - methods
              </a>
            
              <a class="source" href="doc.6.wrappers.html">
                doc - wrappers
              </a>
            
              <a class="source" href="doc.7.listeners.html">
                doc - listeners
              </a>
            
              <a class="source" href="doc.8.features.html">
                doc - features
              </a>
            
              <a class="source" href="ceb-feature-template.html">
                source - ceb-feature-template.js
              </a>
            
              <a class="source" href="ceb.html">
                source - ceb.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="interceptors">Interceptors</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Get a builder.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> builder = ceb().name(<span class="hljs-string">'properties-intercepted-tag'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="interceptors">Interceptors</h2>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Properties having accessors or properties linked to attributes can have interceptors.
Interceptors can intercept write and read accesses of properties.
They wrap the accessors, by this way they can process logic around the effective access.</p>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Interceptors work only against structure’s properties.</p>
<p>The property <em>propIntercepted</em> has accesors, so accesses can be intercetped.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>builder.properties({
    propIntercepted: {
        set: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el, value)</span> </span>{
            el._propIntercepted = value;
        },
        get: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el)</span> </span>{
            <span class="hljs-keyword">return</span> el._propIntercepted;
        }
    }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h3 id="write-callback">Write callback</h3>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>The function <em>interceptWrite</em> is a write access callback.</p>
<blockquote>
<p>@param next (function) will call the next stacked callback
@param el (HTMLElement) the current element
@param value (*) the value of the previous stacked callback</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interceptWrite</span><span class="hljs-params">(next, el, value)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>There, logic can be done with the element instance and the given value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> processedValue = (value || <span class="hljs-string">''</span>).toUpperCase();</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>The function <em>next</em> will call the next stacked callback.
Its argument will be the <em>value</em> of the next stacked callback.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> result = next(processedValue);</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>There, logic can be done with the element instance and the returned value.
Usually accessors set and so interceptors dedicated for writing don’t return values.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-built_in">console</span>.log(el.tagName, <span class="hljs-string">'a property has been written'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><em>result</em> will be the returned value of the function <em>next</em> into the previous stacked callback.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> result;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h3 id="read-callback">Read callback</h3>

            </div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>The function <em>interceptRead</em> is a read access callback.</p>
<blockquote>
<p>@param next (function) will call the next stacked callback
@param el (HTMLElement) the current element
@param value (*) the value of the previous stacked callback</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interceptRead</span><span class="hljs-params">(next, el, value)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Usually accessors get and so interceptors dedicated for reading don’t have given value.</p>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>There, logic can be done with the element instance and the given value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-built_in">console</span>.log(el.tagName, <span class="hljs-string">'a property is going to be read'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>The function <em>next</em> will call the next stacked callback.
Its argument will be the value of the next stacked callback.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> result = next(value);</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>There, logic can be done with the element instance and the returned value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> processedResult = (result || <span class="hljs-string">''</span>).toLowerCase();</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><em>processedResult</em> will be the returned value of the function <em>next</em> into the previous stacked callback.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> processedResult;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap for-h3">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <h3 id="intercept">Intercept</h3>

            </div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>The builder’s method <strong>intercept</strong> adds to the structure the given interceptors according to the intercepted property.</p>
<p>The first argument of the method <em>intercept</em> is the property name.
The second argument is the callback dedicated to the write access, it’s optional.
The third argument is the callback dedicated to the read access, it’s optional.</p>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>The write accesses of the property <em>propIntercepted</em> will be intercepted by the callback <em>interceptWrite</em>.
The read accesses of the property <em>propIntercepted</em> will be intercepted by the callback <em>interceptRead</em>.</p>

            </div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <blockquote>
<p>@param name (string) the name of the property to intercept
@param interceptWrite (function) the callback for write accesses
@param interceptRead (function) the callback for read accesses</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>builder.intercept(<span class="hljs-string">'propIntercepted'</span>, interceptWrite, interceptRead);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
